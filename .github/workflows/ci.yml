name: CI Code Quality

on:
  push:
    branches: [ "main", "develop", "devops" ]
  pull_request:
    branches: ["main"]


jobs:
  # --- –ü–û–¢–û–ö 1: –õ–∏–Ω—Ç–µ—Ä (–°—Ç–∏–ª—å –∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å) ---
  lint:
    name: ‚ö° Ruff Linter
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python 3.13
        uses: actions/setup-python@v5
        with:
          python-version: "3.13"
          cache: "pip" # –ê–≤—Ç–æ-–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements-dev.txt

      - name: Run Ruff (Linter)
        run: ruff check .

      - name: Run Ruff (Formatter check)
        # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∫–æ–¥ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω (–Ω–µ –º–µ–Ω—è–µ—Ç —Ñ–∞–π–ª—ã, —Ç–æ–ª—å–∫–æ —Ä—É–≥–∞–µ—Ç—Å—è)
        run: ruff format --check .

  # --- –ü–û–¢–û–ö 2: –¢–∏–ø–∏–∑–∞—Ü–∏—è (–°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤) ---
  type-check:
    name: üõ°Ô∏è Mypy Static Analysis
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python 3.13
        uses: actions/setup-python@v5
        with:
          python-version: "3.13"
          cache: "pip"

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements-dev.txt

      - name: Run Mypy
        run: mypy .

  # --- (–ù–ê –ë–£–î–£–©–ï–ï) –ü–û–¢–û–ö 3: –¢–µ—Å—Ç—ã ---
  # tests:
  #   name: üß™ Pytest
  #   runs-on: ubuntu-latest
  #   needs: [lint, type-check] # –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ª–∏–Ω—Ç–µ—Ä—ã –ø—Ä–æ–π–¥—É—Ç
  #   steps:
  #     ... (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è) ...
  #     - run: pytest