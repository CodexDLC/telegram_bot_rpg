[← К оглавлению Combat](./README.md)

# ⚔️ Видение боя и Поток (Combat Vision & Flow)

## 1. Философия RBC (Reactive Burst Combat)
Бой в нашей игре — это не соревнование в скорости нажатия кнопок и не механическое повторение «ротаций». Это тактическое противостояние намерений, где каждый размен ударами меняет контекст следующего шага.

**Ключевые принципы:**

*   **Реактивность:** Каждое действие игрока — это ответ на текущую ситуацию в бою, а не просто активация способности по кулдауну.
*   **Бой как диалог:** Система «разговаривает» с игроком через возникающие возможности (токены, финты), а не просто обслуживает его привычки.
*   **Намерения вместо приёмов:** Игрок выбирает не «удар №1», а способ продолжить бой в текущем тактическом контексте.

## 2. Поток времени и Асинхронность
Мы отказываемся от классической пошаговой системы с бросками инициативы в пользу персональных очередей и асинхронности.

*   **Индивидуальный поток:** В бою нет общего «Хода 1» или «Хода 2». У каждого участника свой темп.
*   **Очередь врагов:** Противники выстраиваются к игроку в персональную очередь. Игрок взаимодействует с тем, кто стоит первым, отправляя ему своё «Намерение».
*   **Одновременность:** Пока вы решаете, как ответить первому врагу, второй и третий уже могут заявлять свои действия против вас. Расчёт происходит в момент столкновения ваших намерений (Размена).

## 3. Правило 60 секунд (Force Attack)
Для поддержания динамики и защиты от «зависания» боёв в асинхронном режиме действует правило тайм-аута:

*   Если противник отправил вам Намерение (атаку), а вы не отвечаете более 60 секунд, система считает это AFK-состоянием.
*   В этом случае ваше Намерение рассчитывается как «Безответный удар». Вы пропускаете защиту, а враг проводит полноценную атаку.

## 4. Глобальные шаги (Global Step Counter)
Хотя у каждого свой темп, для синхронизации мира используется глобальный счётчик шагов.

*   **События:** Глобальный шаг инкрементируется только при совершении физического Размена (удар об удар).
*   **Мгновенные действия:** Использование предметов или мгновенных заклинаний происходит «внутри» текущего шага и не двигает время вперёд.
*   **Лог боя:** Все события группируются по этим шагам, создавая цельную историю сражения.