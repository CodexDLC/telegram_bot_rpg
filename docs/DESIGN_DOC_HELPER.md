## 1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞" (–°–∏—Å—Ç–µ–º–∞ `/help`)

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–Ω—É—é `help`-–∫–æ–º–∞–Ω–¥—É, –∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é "–ë–∏–±–ª–∏–æ—Ç–µ–∫—É" –∑–Ω–∞–Ω–∏–π –æ–± –∏–≥—Ä–µ. –ò–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–∞–∫ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª—ã, —Ç–∞–∫ –∏ _–∏—Å–∫–∞—Ç—å_ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

- **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞:** –ö–æ–º–∞–Ω–¥–∞ `/help` (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è `app/handlers/commands.py`).
    
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** FSM (–ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π), –Ω–∞–ø—Ä–∏–º–µ—Ä, `HelperFSM`.
    
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:** –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ –ë–î (`library_articles`).
    

## 2. –õ–æ–≥–∏–∫–∞ FSM: `HelperFSM`

FSM –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è "—Ä–µ–∂–∏–º–∞ –ø–æ–∏—Å–∫–∞".

- `HelperFSM.browsing`: (–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é) –ò–≥—Ä–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Ä–∞–∑–¥–µ–ª—ã.
    
- `HelperFSM.searching`: –ò–≥—Ä–æ–∫ –Ω–∞–∂–∞–ª "–ü–æ–∏—Å–∫", –∏ –±–æ—Ç _–æ–∂–∏–¥–∞–µ—Ç_ –æ—Ç –Ω–µ–≥–æ _—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ_ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∑–∞–ø—Ä–æ—Å–æ–º.
    

## 3. –°—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (User Flow)

1. **–í—Ö–æ–¥:** –ò–≥—Ä–æ–∫ –≤–≤–æ–¥–∏—Ç `/help`.
    
2. **–û—Ç–≤–µ—Ç –±–æ—Ç–∞:**
    
    - "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ë–∏–±–ª–∏–æ—Ç–µ–∫—É. –ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω—ã –∑–Ω–∞–Ω–∏—è –æ–± –û—Å–∫–æ–ª–∫–∞—Ö. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –∏–ª–∏ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –ø–æ–∏—Å–∫–æ–º."
        
    - _–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (Inline):_
        
        - `[ üõ°Ô∏è –ë–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ ]` (callback: `help:section:combat`)
            
        - `[ üß≠ –ú–∏—Ä –∏ –õ–æ—Ä ]` (callback: `help:section:world`)
            
        - `[ ‚öôÔ∏è –ò–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ ]` (callback: `help:section:mechanics`)
            
        - `[ üîç –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º ]` (callback: `help:search_start`)
            
3. **–°—Ü–µ–Ω–∞—Ä–∏–π –ê (–ü—Ä–æ—Å–º–æ—Ç—Ä):**
    
    - –ò–≥—Ä–æ–∫ –Ω–∞–∂–∏–º–∞–µ—Ç `[ üõ°Ô∏è –ë–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ ]`.
        
    - –ë–æ—Ç _—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç_ —Å–æ–æ–±—â–µ–Ω–∏–µ, –ø–æ–∫–∞–∑—ã–≤–∞—è –ø–æ–¥-—Ä–∞–∑–¥–µ–ª—ã ("–°—Ç–∞—Ç—ã", "–ù–∞–≤—ã–∫–∏", "–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ") –∏ –∫–Ω–æ–ø–∫—É `[ ‚óÄÔ∏è –ù–∞–∑–∞–¥ ]`.
        
4. **–°—Ü–µ–Ω–∞—Ä–∏–π –ë (–ü–æ–∏—Å–∫):**
    
    - –ò–≥—Ä–æ–∫ –Ω–∞–∂–∏–º–∞–µ—Ç `[ üîç –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º ]`.
        
    - –ë–æ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ: `await state.set_state(HelperFSM.searching)`.
        
    - –ë–æ—Ç _—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç_ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–í—ã –≤–æ—à–ª–∏ –≤ —Ä–µ–∂–∏–º –ø–æ–∏—Å–∫–∞. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä: '—Å—Ç–∞—Ç—ã' –∏–ª–∏ '–≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å')."
        
    - –ò–≥—Ä–æ–∫ –ø–∏—à–µ—Ç –≤ —á–∞—Ç: "—Å—Ç–∞—Ç—ã".
        
    - **–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ö—ç–Ω–¥–ª–µ—Ä** (–∫–æ—Ç–æ—Ä—ã–π –ª–æ–≤–∏—Ç `HelperFSM.searching` –∏ `F.text`).
        
    - –•—ç–Ω–¥–ª–µ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å: `results = await library_service.search_by_keyword(m.text)`.
        
    - –ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏. (–ò FSM –ª–∏–±–æ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ `searching`, –ª–∏–±–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è).
        

## 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î: `library_articles`

(–ö–∞–∫ —Ç—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–∏–ª, –Ω—É–∂–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –≤ –ë–î).

|**–ü–æ–ª–µ**|**–¢–∏–ø**|**–û–ø–∏—Å–∞–Ω–∏–µ**|
|---|---|---|
|`article_id`|`INTEGER`|PK, ID —Å—Ç–∞—Ç—å–∏|
|`title`|`TEXT`|–ó–∞–≥–æ–ª–æ–≤–æ–∫ ("–ß—Ç–æ —Ç–∞–∫–æ–µ –°—Ç–∞—Ç—ã")|
|`content`|`TEXT`|–¢–µ–ª–æ —Å—Ç–∞—Ç—å–∏ (HTML-—Ç–µ–∫—Å—Ç)|
|`section`|`TEXT`|–ö–∞—Ç–µ–≥–æ—Ä–∏—è (`combat`, `world`, `mechanics`)|
|`keywords`|`TEXT`|–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ ("—Å—Ç–∞—Ç—ã, —Å–∏–ª–∞, –ª–æ–≤–∫–æ—Å—Ç—å, special")|

## 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¢—É—Ç–æ—Ä–∏–∞–ª–æ–º

(–¢–≤–æ—è –∏–¥–µ—è –ø—Ä–æ "–∫–ª–∞—Å—Å –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–æ–¥–∏—Ç—å –∏–≥—Ä–æ–∫–∞ –ø–æ —Ç—É—Ç–æ—Ä–∏–∞–ª—É").

–í /help –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É [ ‚ùì –ú–æ–π –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å ], –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –∏—â–µ—Ç –≤ –ë–î, –∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π FSM-—Ö—ç–Ω–¥–ª–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, OnboardingFSM), –∫–æ—Ç–æ—Ä—ã–π –∑–∞–Ω–æ–≤–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –∏–≥—Ä–æ–∫—É –±–∞–∑–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–º –æ–Ω –Ω–∞—É—á–∏–ª—Å—è –≤ —Ç—É—Ç–æ—Ä–∏–∞–ª–µ.