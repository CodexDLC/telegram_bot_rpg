# Основные Игровые Циклы (Core Loops)

Игра разделена на режимы активности, закрывающие разные потребности игрока, и использует гибридную навигацию.

## 1. Режим "Исследование" (Idle / AFK)
**Цель:** Прокачка навыков и фарм мелких ресурсов без микроконтроля.
**Механика:**
* Игрок выбирает активность: "Тренировка", "Патруль", "Медитация".
* Запускается фоновый процесс (таймер).
* **Результат:** Опыт навыков, мелкий лут, восстановление энергии.

## 2. Режим "Рифт" (Active PvE / Exploration)
**Структура:**
* Рифт — это граф (сетка) из Нод (комнат).
* Игрок перемещается из Ноды в Ноду.
* В каждой Ноде происходит событие (Бой, Лут, Ловушка).
* **Цель:** Дойти до финала и выйти живым.

## 3. Режим "Арена и PvP" (Active PvP)
**Механика:** Текстовый тактический бой.
* Турниры (1x1, Group vs Group).
* Рейтинговые матчи.

---

## 4. Архитектура Локаций: Сервисные Хабы (Service Hubs)

Мир игры не является сплошным графом. Существуют особые точки — **Хабы**, которые работают как отдельные "мини-приложения" внутри бота.

### Концепция "Выхода из Графа"
Когда игрок входит в Хаб (например, Арену или Мэрию), он **покидает** стандартный режим навигации.
1.  **Вход:** Игрок нажимает "Войти в Арену".
2.  **Переключение:** FSM переходит из состояния `Navigation` в состояние сервиса (напр. `ArenaMode` или `ShopMode`).
3.  **Изоляция:** Внутри Хаба не действуют правила перемещения по карте. Здесь работают свои механики:
    * **Арена:** Интерфейс матчмейкинга, подача заявок (1x1, 5x5), турнирные сетки.
    * **Гильдия / Мэрия:** Доска объявлений (список квестов), сдача контрактов.
    * **Рынок:** Интерфейс торговли и аукциона.
4.  **Выход:** Кнопка "Покинуть здание" возвращает игрока в точку входа в глобальном графе.

Это позволяет создавать сложный функционал (турниры, крафт, диалоги) без перегрузки основной карты мира.