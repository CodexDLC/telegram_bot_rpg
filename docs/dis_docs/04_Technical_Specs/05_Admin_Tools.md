üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞
–°—Ç–∞—Ç—É—Å: Draft –¶–µ–ª—å: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã, –≤—ã–¥–∞—á–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –æ—Ç–ª–∞–¥–∫–∏ –º–µ—Ö–∞–Ω–∏–∫ –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î.

1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–ö–æ–Ω—Ç—Ä–æ–ª—å –î–æ—Å—Ç—É–ø–∞
–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –Ω–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –æ–±—ã—á–Ω—ã–º –∏–≥—Ä–æ–∫–∞–º.

–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è: –í .env –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ ADMIN_IDS (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é).

–§—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞

ADMIN_IDS=12345678,87654321
–§–∏–ª—å—Ç—Ä (AdminFilter): –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä Aiogram, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç user_id –Ω–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ admin_router.

FSM: AdminMode
–°–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∞–¥–º–∏–Ω–∞ –æ—Ç –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏.

Python

# app/resources/fsm_states/states.py
class AdminMode(StatesGroup):
    menu = State()          # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∞–¥–º–∏–Ω–∫–∏
    item_add = State()      # –í–≤–æ–¥ ID/–Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ –¥–ª—è –≤—ã–¥–∞—á–∏
    currency_add = State()  # –í–≤–æ–¥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–∞–ª—é—Ç—ã
    teleport = State()      # –í—ã–±–æ—Ä –ª–æ–∫–∞—Ü–∏–∏ –¥–ª—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞
2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (MVP)
–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
–ö–æ–º–∞–Ω–¥–∞: /admin (–∏–ª–∏ /gm).

–£—Å–ª–æ–≤–∏–µ: User ID –≤ ADMIN_IDS.

–î–µ–π—Å—Ç–≤–∏–µ:

–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞.

–°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–µ–π—Ç (state.clear()).

–°—Ç–∞–≤–∏—Ç —Å—Ç–µ–π—Ç AdminMode.menu.

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è" —Å –∫–Ω–æ–ø–∫–∞–º–∏.

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–ö–Ω–æ–ø–∫–∏)
1. üì¶ –í—ã–¥–∞—á–∞ –ü—Ä–µ–¥–º–µ—Ç–æ–≤ (Give Item)
–õ–æ–≥–∏–∫–∞:

–ê–¥–º–∏–Ω –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é (Weapon/Armor).

–ë–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ (–∫–ª—é—á–∏ –∏–∑ BASE_ITEM_TEMPLATES).

–ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ —à–∞–±–ª–æ–Ω -> –ü—Ä–µ–¥–º–µ—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ.

Advanced: –¢–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥ JSON –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ –Ω–∞ –ª–µ—Ç—É.

2. üí∞ –†–µ—Å—É—Ä—Å—ã (Add Resources)
–ö–Ω–æ–ø–∫–∏: +1000 –ü—ã–ª–∏, +10 –°–ª–∏—Ç–∫–æ–≤, +100 –ö–æ–∂–∏.

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ WalletRepo.add_resource().

3. üåÄ –¢–µ–ª–µ–ø–æ—Ä—Ç (Teleport)
–õ–æ–≥–∏–∫–∞: –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ª–æ–∫–∞—Ü–∏–π –∏–∑ WORLD_DATA.

–î–µ–π—Å—Ç–≤–∏–µ: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å location_id –≤ Redis –∏ –≤—ã–∑–≤–∞—Ç—å NavigationService.reload_current_ui(). –ü–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª –≤ —Å—Ç–µ–Ω–µ.

4. üíÄ –°–±—Ä–æ—Å –ü–µ—Ä—Å–æ–Ω–∞–∂–∞ (Wipe Self)
–î–µ–π—Å—Ç–≤–∏–µ: –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏–∑ –ë–î –∏ Redis. –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ—Ç–µ—Å—Ç–∞ "–ù–æ–≤–æ–π –∏–≥—Ä—ã".

3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ (–ü–ª–∞–Ω)
–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
app/handlers/admin/__init__.py ‚Äî –†–æ—É—Ç–µ—Ä.

app/handlers/admin/admin_menu.py ‚Äî –•—ç–Ω–¥–ª–µ—Ä –∫–æ–º–∞–Ω–¥—ã /admin –∏ –º–µ–Ω—é.

app/handlers/admin/admin_tools.py ‚Äî –õ–æ–≥–∏–∫–∞ –≤—ã–¥–∞—á–∏ –∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞.

app/filters/is_admin.py ‚Äî –§–∏–ª—å—Ç—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ ID.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –§–∏–ª—å—Ç—Ä–∞
Python

# app/filters/is_admin.py
from aiogram.filters import BaseFilter
from aiogram.types import Message, CallbackQuery # <--- –î–æ–±–∞–≤–∏–ª–∏ CallbackQuery
from app.core.config import ADMIN_IDS 

class IsAdmin(BaseFilter):
    # –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞
    async def __call__(self, event: Message | CallbackQuery) -> bool:
        user = event.from_user
        if not user:
            return False
        return user.id in ADMIN_IDS