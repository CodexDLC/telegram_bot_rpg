# üéí –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è: –°–∏—Å—Ç–µ–º–∞ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—è v3.0

**–°—Ç–∞—Ç—É—Å:** Draft / Approved
**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ UI –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è —Å "–ö—É–∫–ª–æ–π" –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π –∏ —É–¥–æ–±–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π.

---

## 1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è UI (User Flow)

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä–æ–∏—Ç—Å—è –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **"–î–∏—Å–ø–ª–µ–π + –ü—É–ª—å—Ç"**.
–ú—ã –Ω–µ –≤—ã–≤–∞–ª–∏–≤–∞–µ–º –≤—Å—ë –≤ –∫—É—á—É. –ú—ã —Ä–∞–∑–¥–µ–ª—è–µ–º "–°—Ç–∞—Ç—É—Å" (—á—Ç–æ –Ω–∞–¥–µ—Ç–æ) –∏ "–•—Ä–∞–Ω–∏–ª–∏—â–µ" (—á—Ç–æ –≤ —Ä—é–∫–∑–∞–∫–µ).

### –£—Ä–æ–≤–µ–Ω—å 0: –ì–ª–∞–≤–Ω—ã–π –≠–∫—Ä–∞–Ω ("–ö—É–∫–ª–∞")
* **Callback:** `level="main"`
* **–¢–µ–∫—Å—Ç:** –°—Ö–µ–º–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–¥–µ—Ç—ã—Ö –≤–µ—â–µ–π –∏ –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.
    ```text
    üë§ –≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞ (Warrior):
    [ü§ï –ì–æ–ª–æ–≤–∞]: üß¢ –ö–æ–∂–∞–Ω—ã–π —à–ª–µ–º
    [üëï –¢–µ–ª–æ]:   ‚Äî–ø—É—Å—Ç–æ‚Äî
    [üó° –†—É–∫–∞ R]: üó° –†–∂–∞–≤—ã–π –º–µ—á
    [üõ° –†—É–∫–∞ L]: ‚Äî–ø—É—Å—Ç–æ‚Äî

    üéí –†—é–∫–∑–∞–∫: 5 / 30 —Å–ª–æ—Ç–æ–≤.
    üí∞ –ó–æ–ª–æ—Ç–æ: 120
    ```
* **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏):**
    * `[ ‚öîÔ∏è –≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞ ]` -> –≤–µ–¥–µ—Ç –Ω–∞ –≤—ã–±–æ—Ä —Ç–∏–ø–∞ —Å–ª–æ—Ç–∞.
    * `[ üéí –†–µ—Å—É—Ä—Å—ã ]` -> –≤–µ–¥–µ—Ç –∫ —Ä—É–¥–µ, –∫–æ–∂–µ –∏ —Ç.–¥.
    * `[ ‚öôÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ]` -> –∫—Ä–∞—Ñ—Ç–æ–≤—ã–µ —á–∞—Å—Ç–∏.
    * `[ üìú –ö–≤–µ—Å—Ç–æ–≤—ã–µ ]` -> —Å—é–∂–µ—Ç–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã.
    * `[ üîô –í—ã—Ö–æ–¥ ]`

### –£—Ä–æ–≤–µ–Ω—å 1: –í—ã–±–æ—Ä –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
* **Callback:** `level="sub", section="equip"`
* **–õ–æ–≥–∏–∫–∞:** –£—Ç–æ—á–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞.
* **–ö–Ω–æ–ø–∫–∏:**
    * `[ üî™ –û—Ä—É–∂–∏–µ ]`, `[ üõ°Ô∏è –ë—Ä–æ–Ω—è ]`, `[ üíç –ë–∏–∂—É—Ç–µ—Ä–∏—è ]`.

### –£—Ä–æ–≤–µ–Ω—å 2: –°–ø–∏—Å–æ–∫ –ü—Ä–µ–¥–º–µ—Ç–æ–≤ (3x3 Grid)
* **Callback:** `level="list", section="equip", category="weapon", page=0`
* **–¢–µ–∫—Å—Ç:** –ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å –∏—Ö —Å—Ç–∞—Ç—É—Å–æ–º (–ù–∞–¥–µ—Ç–æ [E]).
    ```text
    üî™ –û—Ä—É–∂–∏–µ (–°—Ç—Ä. 1):
    1. –†–∂–∞–≤—ã–π –º–µ—á [E]
    2. –ö–∏–Ω–∂–∞–ª –≥–æ–±–ª–∏–Ω–∞
    3. –°–ª–æ–º–∞–Ω–Ω–∞—è –¥—É–±–∏–Ω–∞
    ...
    ```
* **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞:** –¶–∏—Ñ—Ä–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–±–æ—Ä–∞.
    ```text
    [ 1 ] [ 2 ] [ 3 ]
    [ 4 ] [ 5 ] [ 6 ]
    [ < ] 1/2 [ > ]
    [ üîô –ù–∞–∑–∞–¥ ]
    ```

### –£—Ä–æ–≤–µ–Ω—å 3: –î–µ—Ç–∞–ª–∏ –ü—Ä–µ–¥–º–µ—Ç–∞
* **Callback:** `level="item", item_id=123`
* **–¢–µ–∫—Å—Ç:** –û–ø–∏—Å–∞–Ω–∏–µ, —Å—Ç–∞—Ç—ã, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.
* **–î–µ–π—Å—Ç–≤–∏—è:** `[ ‚úÖ –ù–∞–¥–µ—Ç—å/–°–Ω—è—Ç—å ]`, `[ üöÆ –í—ã–±—Ä–æ—Å–∏—Ç—å ]`, `[ üîô –ù–∞–∑–∞–¥ ]`.

---

## 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### A. Callback Data (`inventory_callback.py`)
–ï–¥–∏–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –≤—Å–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

```python
from aiogram.filters.callback_data import CallbackData

class InventoryCallback(CallbackData, prefix="inv"):
    # –£—Ä–æ–≤–µ–Ω—å –º–µ–Ω—é: 'main', 'sub', 'list', 'item'
    level: str
    
    # –í–ª–∞–¥–µ–ª–µ—Ü (–¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
    user_id: int
    
    # –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ–∫—Ü–∏—è: 'equip', 'resource', 'material', 'quest'
    section: str = "none"
    
    # –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è: 'weapon', 'armor', 'ore' ...
    category: str = "none"
    
    # –ü–∞–≥–∏–Ω–∞—Ü–∏—è
    page: int = 0
    
    # ID –ø—Ä–µ–¥–º–µ—Ç–∞ (–¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π)
    item_id: int = 0
    
    # –î–µ–π—Å—Ç–≤–∏–µ: 'view', 'equip', 'drop'
    action: str = "view"