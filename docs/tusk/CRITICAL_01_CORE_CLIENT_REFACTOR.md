# üö® CRITICAL: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Core Client Architecture

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• CRITICAL / BLOCKER
**–°—Ç–∞—Ç—É—Å:** –ö –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é
**–¶–µ–ª—å:** –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è `apps/bot` –æ—Ç `apps/game_core` –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

---

## 1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –ü–µ—Ä–µ—Ö–æ–¥–∞ (Gateway Pattern)

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç UI-—Å–µ—Ä–≤–∏—Å—ã –±–æ—Ç–∞ (`apps/bot/ui_service`) –Ω–∞–ø—Ä—è–º—É—é –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –∏ –≤—ã–∑—ã–≤–∞—é—Ç —Å–µ—Ä–≤–∏—Å—ã –∏–≥—Ä–æ–≤–æ–≥–æ —è–¥—Ä–∞ (`apps/game_core` –∏–ª–∏ `apps/common/services/core_service`). –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –∂–µ—Å—Ç–∫—É—é —Å–≤—è–∑–Ω–æ—Å—Ç—å (Monolithic Hell), –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º –≤—ã–Ω–µ—Å—Ç–∏ —è–¥—Ä–æ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

**–†–µ—à–µ–Ω–∏–µ: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å–ª–æ—è `apps/bot/core_client`**

1.  **Core Client Layer:**
    *   –í –ø–∞–ø–∫–µ `apps/bot/core_client/` —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `CombatClient`, `InventoryClient`, `ProfileClient`).
    *   **–°–µ–π—á–∞—Å (Monolith Mode):** –≠—Ç–∏ –∫–ª–∏–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è –ø—Ä–æ—Å—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç —Å–µ—Ä–≤–∏—Å—ã —è–¥—Ä–∞ –∏ –≤—ã–∑—ã–≤–∞—é—Ç –∏—Ö –º–µ—Ç–æ–¥—ã. –≠—Ç–æ "–§–∞—Å–∞–¥".
    *   **–í –±—É–¥—É—â–µ–º (Microservices Mode):** –ú—ã –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —ç—Ç–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤: –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ HTTP/gRPC –∑–∞–ø—Ä–æ—Å–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `GameCore`.
    *   **–í–∞–∂–Ω–æ:** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ—Ç–æ–¥–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞ (`get_inventory`, `attack_target`) –Ω–µ –¥–æ–ª–∂–µ–Ω –º–µ–Ω—è—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã. –û–Ω –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å DTO, –∞ –Ω–µ ORM-–º–æ–¥–µ–ª–∏.

2.  **–ü—Ä–∞–≤–∏–ª–æ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
    *   ‚ùå `apps/bot/ui_service` **–ó–ê–ü–†–ï–©–ï–ù–û** –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —á—Ç–æ-–ª–∏–±–æ –∏–∑ `apps/game_core`.
    *   ‚úÖ `apps/bot/ui_service` –¥–æ–ª–∂–µ–Ω –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å **–¢–û–õ–¨–ö–û** `apps/bot/core_client`.

---

## 2. –ü–ª–∞–Ω –†–∞–±–æ—Ç (Roadmap)

### –≠—Ç–∞–ø 1: Combat Client (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ1)
–ë–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–∏–±–æ–ª–µ–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –∏ —Å–ª–æ–∂–Ω–∞. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å `CombatClient`, –∫–æ—Ç–æ—Ä—ã–π —Å–∫—Ä–æ–µ—Ç –∑–∞ —Å–æ–±–æ–π `CombatManager`, `ArenaManager` –∏ `StatsCalculator`.
*   UI –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å —Ñ–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–∞—Ç–æ–≤ (`StatsCalculator`).
*   UI –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å –ø—Ä–æ —Å–µ—Å—Å–∏–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –Ω–∞–ø—Ä—è–º—É—é.

### –≠—Ç–∞–ø 2: Inventory Client
–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å —Å–µ–π—á–∞—Å —Å–∏–ª—å–Ω–æ —Ä–∞–∑–º–∞–∑–∞–Ω –ø–æ UI. –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å `InventoryClient`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Å–ø–∏—Å–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è (–Ω–∞–¥–µ—Ç—å/—Å–Ω—è—Ç—å).

### –≠—Ç–∞–ø 3: –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
–ü–µ—Ä–µ–Ω–æ—Å –ª–æ–≥–∏–∫–∏ —Ç—É—Ç–æ—Ä–∏–∞–ª–∞, –º–µ–Ω—é –∏ –≤—Ö–æ–¥–∞ –≤ —Ö–∞–±—ã.

---

## 3. –°–ø–∏—Å–æ–∫ –ù–∞—Ä—É—à–∏—Ç–µ–ª–µ–π (Tech Debt Registry)

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ `apps/bot/ui_service`, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ä—É—à–∞—é—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (–∏–º–µ—é—Ç –ø—Ä—è–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏–∑ Core). –ò—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ö–ª–∏–µ–Ω—Ç–æ–≤.

### üî¥ Combat Domain (High Priority)
*   `apps/bot/ui_service/combat/combat_ui_service.py`
    *   *–ù–∞—Ä—É—à–µ–Ω–∏–µ:* –ò–º–ø–æ—Ä—Ç `CombatManager`, `AccountManager` (common services), `StatsCalculator` (game_core).

### üî¥ Inventory Domain
*   `apps/bot/ui_service/inventory/inventory_ui_service.py`
    *   *–ù–∞—Ä—É—à–µ–Ω–∏–µ:* –ò–º–ø–æ—Ä—Ç `InventoryService` (game_core), `AccountManager`.
*   `apps/bot/ui_service/inventory/inventory_details_ui.py`
    *   *–ù–∞—Ä—É—à–µ–Ω–∏–µ:* –ò–º–ø–æ—Ä—Ç `InventoryService`.
*   `apps/bot/ui_service/inventory/inventory_list_ui.py`
    *   *–ù–∞—Ä—É—à–µ–Ω–∏–µ:* –ò–º–ø–æ—Ä—Ç `InventoryService`.
*   `apps/bot/ui_service/inventory/inventory_main_menu_ui.py`
    *   *–ù–∞—Ä—É—à–µ–Ω–∏–µ:* –ò–º–ø–æ—Ä—Ç `InventoryService`.
*   `apps/bot/ui_service/inventory/inventory_quick_slot_ui.py`
    *   *–ù–∞—Ä—É—à–µ–Ω–∏–µ:* –ò–º–ø–æ—Ä—Ç `InventoryService`.

### üü† General / Menu Domain
*   `apps/bot/ui_service/menu_service.py`
    *   *–ù–∞—Ä—É—à–µ–Ω–∏–µ:* –ò–º–ø–æ—Ä—Ç `GameSyncService` (game_core).
*   `apps/bot/ui_service/hub_entry_service.py`
    *   *–ù–∞—Ä—É—à–µ–Ω–∏–µ:* –ò–º–ø–æ—Ä—Ç `AccountManager`, `ArenaManager`, `CombatManager`.

### üü° Tutorial Domain
*   `apps/bot/ui_service/tutorial/tutorial_service.py`
    *   *–ù–∞—Ä—É—à–µ–Ω–∏–µ:* –ò–º–ø–æ—Ä—Ç `CharacterSkillsService` (game_core).

---

## 4. Definition of Done (DoD)
1.  –í `apps/bot/ui_service` –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ `apps/game_core` –∏–ª–∏ `apps/common/services/core_service`.
2.  –í—Å–µ –≤—ã–∑–æ–≤—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ `apps/bot/core_client`.
3.  –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç (—Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ).
