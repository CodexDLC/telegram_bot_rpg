> ‚ö†Ô∏è **DRAFT / FEATURE REQUEST**
> –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–∞–∫—Å–æ–Ω–æ–º–∏–∏ –º–æ–Ω—Å—Ç—Ä–æ–≤.
> **–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞:** –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–Ω—Å—Ç—Ä–æ–≤ –ø–æ–¥ –Ω–æ–≤—É—é –±–æ–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É v3.1 (Combat Engine).

# üß¨ Monster Taxonomy & Survival Skills (Design Document)

> **Status:** Draft / Ready for Implementation
> **Focus:** –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–æ–Ω—Å—Ç—Ä–æ–≤ –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –≤—ã–∂–∏–≤–∞–Ω–∏—è.

## 1. –ù–æ–≤–∞—è –¢–∞–∫—Å–æ–Ω–æ–º–∏—è –ú–æ–Ω—Å—Ç—Ä–æ–≤ (Biological Types)

–í —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ö–ª–∞–Ω–∞/–ú–æ–Ω—Å—Ç—Ä–∞ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ —Å—É—â–µ—Å—Ç–≤–∞ –∏ –ø—Ä–∞–≤–∏–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–∏–º.

### 1.1 Enum `BiologicalType`
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–∫–∞—Ç–µ–≥–æ—Ä–∏—é** —Å—É—â–µ—Å—Ç–≤–∞ –∏ **–Ω–∞–≤—ã–∫**, –∫–æ—Ç–æ—Ä—ã–π –∫ –Ω–µ–º—É –ø—Ä–∏–º–µ–Ω–∏–º.

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ (–ù–∞–≤—ã–∫) | –†–µ–∑—É–ª—å—Ç–∞—Ç |
| :--- | :--- | :--- | :--- |
| üêæ **BEAST** (–ó–≤–µ—Ä—å) | –í–æ–ª–∫–∏, –ú–µ–¥–≤–µ–¥–∏, –ü–∞—É–∫–∏, –ö—Ä—ã—Å—ã. | **Survival -> Taming** | –ü–∏—Ç–æ–º–µ—Ü –∏–ª–∏ –ø—Ä–µ–¥–º–µ—Ç "–ö–ª–µ—Ç–∫–∞". |
| üëø **DEMON** (–î–µ–º–æ–Ω) | –ë–µ—Å—ã, –ê–¥—Å–∫–∏–µ –≥–æ–Ω—á–∏–µ, –°—É–∫–∫—É–±—ã. | **Occult -> Demonology** | –ö–æ–Ω—Ç—Ä–∞–∫—Ç, –ø—Ä–∏–∑—ã–≤ –Ω–∞ –≤—Ä–µ–º—è. |
| üíÄ **UNDEAD** (–ù–µ–∂–∏—Ç—å) | –°–∫–µ–ª–µ—Ç—ã, –ó–æ–º–±–∏, –ü—Ä–∏–∑—Ä–∞–∫–∏. | **Dark Arts -> Necromancy** | –ü–æ–¥–Ω—è—Ç–∏–µ —Å–ª—É–≥–∏-–±–æ–ª–≤–∞–Ω—á–∏–∫–∞. |
| ü§ñ **CONSTRUCT** (–ú–µ—Ö–∞–Ω–∏–∑–º) | –ì–æ–ª–µ–º—ã, –î—Ä–æ–Ω—ã, –¢—É—Ä–µ–ª–∏. | **Engineering -> Hacking** | –ü–µ—Ä–µ–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ. |
| üë§ **HUMANOID** (–ì—É–º–∞–Ω–æ–∏–¥) | –ë–∞–Ω–¥–∏—Ç—ã, –ö—É–ª—å—Ç–∏—Å—Ç—ã, –≠–ª—å—Ñ—ã. | **Social -> Leadership** | –ù–∞–π–º, –≤–∑—è—Ç–∏–µ –≤ –ø–ª–µ–Ω, –ø–æ–¥–∫—É–ø. |
| üê≤ **DRAGON** (–î—Ä–∞–∫–æ–Ω) | –í–∏–≤–µ—Ä–Ω—ã, –î—Ä–∞–∫–æ–Ω–∏–¥—ã. | **Elite Taming** (–ö–≤–µ—Å—Ç) | –û—Å–æ–±—ã–π –º–∞—É–Ω—Ç/—Å–ø—É—Ç–Ω–∏–∫. |

### 1.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –î–∞–Ω–Ω—ã—Ö (`MonsterVariant`)

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥: `bio_type` –∑–∞–¥–∞–µ—Ç –æ–±—â—É—é –ª–æ–≥–∏–∫—É, –∞ `interaction_rules` —É—Ç–æ—á–Ω—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è.

```python
class TamingRules(TypedDict):
    difficulty_mod: float  # –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (1.0 = —Å—Ç–∞–Ω–¥–∞—Ä—Ç, 1.5 = —Å–ª–æ–∂–Ω–æ)
    required_item: NotRequired[str]  # ID –ø—Ä–µ–¥–º–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "raw_meat"), –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–ª—è –ø—Ä–∏—Ä—É—á–µ–Ω–∏—è
    min_skill_lvl: int  # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞–≤—ã–∫–∞ –¥–ª—è –ø–æ–ø—ã—Ç–∫–∏

class MonsterVariant(TypedDict):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    
    # 1. –ë–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–∏–ø (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –Ω–∞–≤—ã–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (Taming, Hacking –∏ —Ç.–¥.)
    bio_type: Literal["beast", "demon", "undead", "construct", "humanoid", "dragon"]

    # 2. –ü—Ä–∞–≤–∏–ª–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    # –ï—Å–ª–∏ None ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ë–µ—à–µ–Ω—ã–π –í–æ–ª–∫ –∏–ª–∏ –ë–æ—Å—Å).
    # –ï—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º.
    taming_rules: NotRequired[TamingRules] 
```

**–ü—Ä–∏–º–µ—Ä—ã:**
1.  **–û–±—ã—á–Ω—ã–π –í–æ–ª–∫:** `bio_type="beast"`, `taming_rules={"difficulty_mod": 1.0, "min_skill_lvl": 1}`. -> **–ú–æ–∂–Ω–æ –ø—Ä–∏—Ä—É—á–∏—Ç—å.**
2.  **–ë–æ—Å—Å –í–æ–∂–∞–∫ –°—Ç–∞–∏:** `bio_type="beast"`, `taming_rules=None`. -> **–ù–µ–ª—å–∑—è –ø—Ä–∏—Ä—É—á–∏—Ç—å** (—Ö–æ—Ç—è —ç—Ç–æ –∏ –∑–≤–µ—Ä—å).
3.  **–ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–π –î—Ä–æ–Ω:** `bio_type="construct"`, `taming_rules=None` (–ø–æ–∫–∞ –Ω–µ—Ç –Ω–∞–≤—ã–∫–∞ Hacking).


## 3. –ü–ª–∞–Ω –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Tasks)

1.  **Update Monster Structs:**
    *   –î–æ–±–∞–≤–∏—Ç—å `bio_type` –∏ `taming_rules` –≤ `apps/game_core/resources/game_data/monsters/monster_structs.py`.
    *   –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ–º—å–∏ (–ø—Ä–∏—Å–≤–æ–∏—Ç—å —Ç–∏–ø—ã).

2.  **Implement Skills Logic:**
    *   –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ –≤ `apps/game_core/game_service/skill/skill_service.py`.
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É–ª—ã –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ–ø—ã—Ç–∞.

3.  **Integrate with Encounter Engine:**
    *   –í `encounter_engine.py` –¥–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç `Pathfinder` –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã.
    *   –í `threat_service.py` –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç —É—Ä–æ–Ω–∞ —Å—Ä–µ–¥—ã —Å —É—á–µ—Ç–æ–º `Adaptation`.

4.  **UI & Interaction:**
    *   –í `navigation_formatter.py` –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–∏—Ä—É—á–∏—Ç—å" –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ `Detected` + `Beast`.
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É "Taming Encounter" (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –±–æ—è –∏–ª–∏ –¥–∏–∞–ª–æ–≥).
