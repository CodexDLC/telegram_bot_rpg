# üìù Task: WebSocket Integration

[‚¨ÖÔ∏è –ù–∞–∑–∞–¥: Roadmap](../Roadmap.md)

## üéØ –¶–µ–ª—å
–ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç Polling –∫ WebSocket –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

## üîÆ Future: WebSocket Architecture

### –¢–µ–∫—É—â–∞—è —Å—Ö–µ–º–∞ (Polling):
```
Client ‚Üí [check_match] ‚Üí Backend (–∫–∞–∂–¥—ã–µ 3 —Å–µ–∫)
Client ‚Üí [check_match] ‚Üí Backend
Client ‚Üí [check_match] ‚Üí Backend
```

### –ë—É–¥—É—â–∞—è —Å—Ö–µ–º–∞ (WebSocket):
```
Client ‚Üí [join_queue] ‚Üí Backend
Client ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ WS Connection ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí Backend
Client ‚Üê [match_found event] ‚Üê Backend (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ WebSocket:
| –ê—Å–ø–µ–∫—Ç | Polling | WebSocket |
| :--- | :--- | :--- |
| –ù–∞–≥—Ä—É–∑–∫–∞ | –í—ã—Å–æ–∫–∞—è (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã) | –ù–∏–∑–∫–∞—è (–æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ) |
| Latency | –î–æ 3 —Å–µ–∫ (–∏–Ω—Ç–µ—Ä–≤–∞–ª poll) | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ |
| –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ | –õ–∏–Ω–µ–π–Ω—ã–π —Ä–æ—Å—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–Ω–ª–∞–π–Ω–µ |
| –û–±–∞ –∏–≥—Ä–æ–∫–∞ | –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ polling loops | –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ |

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| WebSocket Manager | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –ø–æ `char_id` |
| Event Bus | –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π (Redis Pub/Sub –∏–ª–∏ in-memory) |
| Arena Events | `match_found`, `queue_update`, `timeout_warning` |
| Client WS Handler | –ü–æ–¥–ø–∏—Å–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π |