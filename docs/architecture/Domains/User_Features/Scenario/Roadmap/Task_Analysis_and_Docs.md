# üõ†Ô∏è Task: Scenario Cleanup & Fixes

> **Status:** üöß In Progress
> **Focus:** –î–æ—Ä–∞–±–æ—Ç–∫–∞ TutorialHandler –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

---

## üéØ –¶–µ–ª–∏
1.  –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é `TutorialHandler` (—É–±—Ä–∞—Ç—å TODO –≤ –º–µ—Ç–æ–¥–∞—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è).
2.  –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å JSON —Å—Ü–µ–Ω–∞—Ä–∏—è (`tutorial_arrival.json`) –ø–æ–¥ –Ω–æ–≤—ã–µ ID –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ —Å–∫–∏–ª–ª–æ–≤.
3.  –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç—É—Ç–æ—Ä–∏–∞–ª–∞.

---

## üìã –ü–ª–∞–Ω —Ä–∞–±–æ—Ç

### 1. TutorialHandler Refactoring
**File:** `backend/domains/user_features/scenario/handlers/tutorial_handler.py`

- [ ] **Finalize Logic:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥ –≤ `on_finalize`.
- [ ] **Monster Generation:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `find_tutorial_monster` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π `EncounterService`.
- [ ] **Stats Calculation:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–∞—Ç–æ–≤ (—Å–µ–π—á–∞—Å —Ç–∞–º —Ö–∞—Ä–¥–∫–æ–¥ +9...+1).

### 2. Content Adaptation (JSON)
**File:** `backend/domains/user_features/scenario/resources/json/tutorial_arrival.json`

- [ ] **Items:** –ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ ID –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –Ω–∞ –Ω–æ–≤—ã–µ (–∏–∑ `backend/resources/game_data/items`).
- [ ] **Skills:** –û–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á–∏ —Å–∫–∏–ª–ª–æ–≤ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ `SkillLibrary`).
- [ ] **Text:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (HTML —Ç–µ–≥–∏).

### 3. Testing
- [ ] –ü—Ä–æ–π—Ç–∏ —Ç—É—Ç–æ—Ä–∏–∞–ª –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞ –≤ –±–æ—Ç–µ.
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–µ–¥–º–µ—Ç—ã –ø–æ—è–≤–∏–ª–∏—Å—å –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ.
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Ç–∞—Ç—ã –Ω–∞—á–∏—Å–ª–∏–ª–∏—Å—å.
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –≤ –±–æ–π.
