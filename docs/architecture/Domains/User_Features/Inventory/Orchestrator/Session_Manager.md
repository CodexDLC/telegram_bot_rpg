# üß† Inventory Session Manager

[‚¨ÖÔ∏è –ù–∞–∑–∞–¥: Inventory Domain](../README.md)

---

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ
–£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –≤ Redis.

## ‚öôÔ∏è –ú–µ—Ö–∞–Ω–∏–∫–∞

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª
1.  **Load:** –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç Snapshot –∏–∑ –ë–î (—á–µ—Ä–µ–∑ ContextAssembler).
2.  **Cache:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Redis —Å TTL **1 —á–∞—Å** (–Ω–∞ —Å–ª—É—á–∞–π –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞).
3.  **Modify:** –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (equip) –æ–±–Ω–æ–≤–ª—è—é—Ç Redis –∏ —Å—Ç–∞–≤—è—Ç —Ñ–ª–∞–≥ `dirty=True`.
4.  **Save:** –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã (–∏–ª–∏ –ø–æ —Ç–∞–π–º–µ—Ä—É) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `dirty`. –ï—Å–ª–∏ `True` ‚Äî –ø–∏—à–µ—Ç –≤ –ë–î.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Redis
–ö–ª—é—á: `inventory:session:{char_id}`
–¢–∏–ø: `JSON`

```json
{
  "items": [ ... ],
  "equipment": { "main_hand": 123 },
  "dirty": true,
  "timestamp": 1700000000
}
```
