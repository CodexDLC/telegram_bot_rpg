# üé® Data Formatting (Backend Logic)

[‚¨ÖÔ∏è –ù–∞–∑–∞–¥: Inventory Engine](../README.md)

---

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ—Ç —Å–ª–æ–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **–ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –¥–∞–Ω–Ω—ã—Ö** (Data Shaping) –≤–Ω—É—Ç—Ä–∏ —è–¥—Ä–∞.
–ö–ª–∞—Å—Å `InventoryFormatter` –±–µ—Ä–µ—Ç —Å—ã—Ä—É—é —Å–µ—Å—Å–∏—é –∏–∑ Redis –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –µ—ë –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π DTO, –∫–æ—Ç–æ—Ä—ã–π —É–¥–æ–±–Ω–æ –æ—Ç–¥–∞–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—É.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ:** `apps/game_core/modules/inventory/inventory/logic/inventory_formatter.py`

---

## üìä View DTOs (–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

### 1. Main Menu View
–°–≤–æ–¥–∫–∞ –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è.
*   **–í–µ—Å:** `current / max`.
*   **–°–ª–æ—Ç—ã:** `occupied / total`.
*   **–í–∞–ª—é—Ç–∞:** –ó–æ–ª–æ—Ç–æ, –ö—Ä–∏—Å—Ç–∞–ª–ª—ã.

### 2. Bag View (–°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤)
–î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Å–µ—Ç–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤.
*   **Input:** `InventorySession`, `filter_category`, `page`.
*   **Output:**
    *   `items`: –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ (–∏–º—è, –∏–∫–æ–Ω–∫–∞, ID).
    *   `pagination`: `{current: 1, total: 5}`.
    *   `sorting`: –¢–µ–∫—É—â–∏–π –º–µ—Ç–æ–¥ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏.

### 3. Detail View (–ö–∞—Ä—Ç–æ—á–∫–∞)
–î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞.
*   **Header:** –ò–º—è + –†–µ–¥–∫–æ—Å—Ç—å (Emoji).
*   **Stats:** –°–ª–æ–≤–∞—Ä—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (`{"–£—Ä–æ–Ω": "15-20", "–°–∏–ª–∞": "+2"}`).
*   **Actions:** –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (`equip`, `use`, `drop`) ‚Äî *Formatter —Ä–µ—à–∞–µ—Ç, –∫–∞–∫–∏–µ –∫–Ω–æ–ø–∫–∏ –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å, –Ω–æ –Ω–µ —Ä–∏—Å—É–µ—Ç –∏—Ö.*

---

## üõ†Ô∏è –õ–æ–≥–∏–∫–∞ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
1.  **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:** –°–∫–ª–∞–¥—ã–≤–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã (Stacking).
2.  **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** –£–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–µ—Ç –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏/–∏–º–µ–Ω–∏.
3.  **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –û—Ç—Å–µ–∏–≤–∞–µ—Ç –ø—Ä–µ–¥–º–µ—Ç—ã –Ω–µ —Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
