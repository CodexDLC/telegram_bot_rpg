# üíé Inventory Enricher

[‚¨ÖÔ∏è –ù–∞–∑–∞–¥: Inventory Engine](../README.md)

---

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ **–æ–±–æ–≥–∞—â–µ–Ω–∏–µ (Enrichment)** –¥–∞–Ω–Ω—ã—Ö.
–ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç "—Å—ã—Ä—ã–µ" –¥–∞–Ω–Ω—ã–µ –∏–∑ Redis (ID + Amount) –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ DTO –¥–ª—è UI (Name, Description, Icon), –∏—Å–ø–æ–ª—å–∑—É—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/domains/user_features/inventory/engine/inventory_enricher.py`

---

## üõ†Ô∏è –ú–µ—Ç–æ–¥—ã

### 1. `enrich_wallet(wallet_data: dict) -> WalletViewDTO`
–ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å –∫–æ—à–µ–ª—å–∫–∞ –∏–∑ Redis –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

*   **Input:**
    ```python
    {
      "currency": {"dust": 100},
      "resources": {"iron_ingot": 5}
    }
    ```
*   **Logic:**
    1.  –ò—Ç–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ –∫–ª—é—á–∞–º.
    2.  –í—ã–∑—ã–≤–∞–µ—Ç `items_db.get_item_data(id)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏–∫–∏.
    3.  –°–æ–±–∏—Ä–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏–º–µ–Ω–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏.
*   **Output:**
    ```python
    {
      "currency": [
        {"id": "dust", "amount": 100, "name": "–ú–∞–≥–∏—á–µ—Å–∫–∞—è –ø—ã–ª—å", "icon": "‚ú®"}
      ],
      "resources": [
        {"id": "iron_ingot", "amount": 5, "name": "–ñ–µ–ª–µ–∑–Ω—ã–π —Å–ª–∏—Ç–æ–∫", "description": "..."}
      ]
    }
    ```

### 2. `enrich_item(item_dto: InventoryItemDTO) -> InventoryItemViewDTO`
(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ï—Å–ª–∏ –≤ `InventoryItemDTO` –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∫–∞–∫–∏—Ö-—Ç–æ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—Ä–∞—Å–∏–≤–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞), Enricher –º–æ–∂–µ—Ç –ø–æ–¥—Ç—è–Ω—É—Ç—å –∏—Ö –∏–∑ –±–∞–∑—ã.
–ù–æ –æ–±—ã—á–Ω–æ `InventoryItemDTO` —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω.

---

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
*   `backend.resources.game_data.items` (Item Registry) ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
