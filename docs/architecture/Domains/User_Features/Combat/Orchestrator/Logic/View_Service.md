# üé® Combat View Service (Data Formatting)

[‚¨ÖÔ∏è –ù–∞–∑–∞–¥: Engine](../../README.md)

---

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ
–°–µ—Ä–≤–∏—Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞. –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Redis (`BattleContext`) –≤ –∫—Ä–∞—Å–∏–≤—ã–µ DTO (`CombatDashboardDTO`).
–≠—Ç–æ **Backend Logic**, –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ —Ç–æ, *—á—Ç–æ* —É–≤–∏–¥–∏—Ç –∏–≥—Ä–æ–∫, –Ω–æ –Ω–µ *–∫–∞–∫* —ç—Ç–æ –±—É–¥–µ—Ç –Ω–∞—Ä–∏—Å–æ–≤–∞–Ω–æ.

---

## üìä –§–æ—Ä–º–∏—Ä—É–µ–º—ã–µ DTO

### 1. CombatDashboardDTO
–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –±–æ—è.
*   **Self:** HP, Energy, Active Effects.
*   **Target:** HP Bar, Distance, Intent (–µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–µ–Ω).
*   **Queue:** –û—á–µ—Ä–µ–¥—å —Ö–æ–¥–æ–≤ (Timeline).
*   **Log:** –ü–æ—Å–ª–µ–¥–Ω–∏–µ 3 —Å–æ–æ–±—â–µ–Ω–∏—è –ª–æ–≥–∞.
*   **Actions (Hand):** –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–§–∏–Ω—Ç–æ–≤) –∏–∑ `Actor.hand`.
    *   –ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç: `id` (hash), `name`, `cost`, `icon`.

### 2. CombatLogDTO
–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –±–æ—è.
*   –ü–∞–≥–∏–Ω–∞—Ü–∏—è.
*   –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –º–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è / –≤—Å—ë).

---

## üõ†Ô∏è –õ–æ–≥–∏–∫–∞
*   **Fog of War:** –°–∫—Ä—ã–≤–∞–µ—Ç —Ç–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è HP –≤—Ä–∞–≥–∞, –µ—Å–ª–∏ –Ω–µ—Ç –Ω–∞–≤—ã–∫–∞ `Scouting`.
*   **Formatting:** –û–∫—Ä—É–≥–ª—è–µ—Ç —á–∏—Å–ª–∞, —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç—ã.
*   **Localization:** –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª—é—á–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞.
*   **Action Preparation:** –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç `FeintCardDTO` –∏–∑ —Ä—É–∫–∏ –∞–∫—Ç–æ—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç –∫–Ω–æ–ø–æ–∫ –¥–ª—è UI.
