# üö™ Combat Entry Orchestrator

[‚¨ÖÔ∏è –ù–∞–∑–∞–¥: Orchestrator](../README.md)

---

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ
–î–∏—Å–ø–µ—Ç—á–µ—Ä –≤—Ö–æ–¥–∞ –≤ –±–æ–π. –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Å–µ—Å—Å–∏–∏.
–†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ Redis-bound —Å–µ—Ä–≤–∏—Å (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä—è–º–æ–π —Å–µ—Å—Å–∏–∏ –ë–î, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SystemDispatcher).

---

## ‚öôÔ∏è –°—Ü–µ–Ω–∞—Ä–∏–∏ (Pipelines)

### 1. `standard_pve`
–û–±—ã—á–Ω—ã–π –±–æ–π –≥—Ä—É–ø–ø—ã –∏–≥—Ä–æ–∫–æ–≤ –ø—Ä–æ—Ç–∏–≤ –º–æ–Ω—Å—Ç—Ä–æ–≤.
*   **Input:** –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ (–∏–≥—Ä–æ–∫–∏ + –º–æ–Ω—Å—Ç—Ä—ã).
*   **Process:**
    1.  –°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ ID.
    2.  –í—ã–∑—ã–≤–∞–µ—Ç `ContextAssembler` –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Redis.
    3.  –§–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –∫–æ–º–∞–Ω–¥.
    4.  –í—ã–∑—ã–≤–∞–µ—Ç `Lifecycle.create_battle`.

### 2. `shadow_duel`
–ë–æ–π —Å —Ç–µ–Ω—å—é (–∫–æ–ø–∏–µ–π —Å–∞–º–æ–≥–æ —Å–µ–±—è).
*   **Input:** `char_id`.
*   **Process:**
    1.  –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–≥—Ä–æ–∫–∞.
    2.  –°–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥: Team Blue (Player) vs Team Red (Shadow Player).
    3.  Shadow Player –ø–æ–ª—É—á–∞–µ—Ç ID `-{char_id}` –∏ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ—Ç –∂–µ —à–∞–±–ª–æ–Ω –¥–∞–Ω–Ω—ã—Ö.

### 3. `arena_match`
PvP –±–æ–π.
*   **Input:** –ö–æ–Ω—Ñ–∏–≥ –∫–æ–º–∞–Ω–¥ –æ—Ç –º–∞—Ç—á–º–µ–π–∫–µ—Ä–∞.
*   **Process:** –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ PvE, –Ω–æ —Ç–æ–ª—å–∫–æ —Å –∏–≥—Ä–æ–∫–∞–º–∏.

---

## üîó –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
*   **Context Assembler:** –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É `temp:setup:{uuid}` –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
*   **Lifecycle Service:** –ü–µ—Ä–µ–¥–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏.
*   **Session Service:** –õ–∏–Ω–∫—É–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ (`account:combat_session`) –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è.
