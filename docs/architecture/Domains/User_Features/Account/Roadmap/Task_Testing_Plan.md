# üß™ Task: Account Domain Testing Plan

> **Status:** üìÖ Planned
> **Goal:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–±–æ—Ç—ã –∞–∫–∫–∞—É–Ω—Ç–∞.

---

## üìã Unit Tests
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –∏–∑–æ–ª—è—Ü–∏–∏.

- [ ] **Services:**
  - [ ] `RegistrationService` (upsert logic)
  - [ ] `LobbyService` (CRUD, limits)
  - [ ] `OnboardingService` (wizard steps)
  - [ ] `LoginService` (routing logic)
  - [ ] `AccountSessionService` (Redis operations)
- [ ] **Gateways:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞ DTO –∏ –≤—ã–∑–æ–≤–∞ —Å–µ—Ä–≤–∏—Å–æ–≤.
- [ ] **Repositories:** –ü—Ä–æ–≤–µ—Ä–∫–∞ SQL –∑–∞–ø—Ä–æ—Å–æ–≤ (mocked DB).

---

## üîó Integration Tests
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ (–∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏) –ë–î –∏ Redis.

- [ ] **Full Flow:** Register ‚Üí Initialize Lobby ‚Üí Create Character ‚Üí Onboarding ‚Üí Login.
- [ ] **Cache:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—ç—à–∞ –ª–æ–±–±–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.
- [ ] **RedisJSON:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π –≤ `ac:{char_id}`.

---

## ü§ñ E2E Tests
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏ –æ—Ç "–∫–ª–∏–µ–Ω—Ç–∞" (–≤—ã–∑–æ–≤ API) –¥–æ –ë–î.

- [ ] **Bot Simulation:** –≠–º—É–ª—è—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –±–æ—Ç–∞ –∫ HTTP API.
- [ ] **Limits:** –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å 5-–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞).
- [ ] **Security:** –ü–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—å —á—É–∂–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (403 Forbidden).
