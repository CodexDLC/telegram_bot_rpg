# Archery Triggers (–°—Ç—Ä–µ–ª–∫–æ–≤–æ–µ –æ—Ä—É–∂–∏–µ)

‚ö†Ô∏è **–°—Ç–∞—Ç—É—Å:** Design Concept (MVP)  
–ù–µ –≤—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∏–∑ —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `game_data/items/`. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã —Ç—Ä–µ–±—É—é—Ç –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ –∏–≥—Ä—É.

---

## üèπ –§–∏–ª–æ—Å–æ—Ñ–∏—è: Archery (–°—Ç—Ä–µ–ª–∫–æ–≤–æ–µ)

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:** ¬´–ü—Ä–æ–µ–∫—Ü–∏—è —Å–º–µ—Ä—Ç–∏¬ª. –ò—Å–∫—É—Å—Å—Ç–≤–æ –ø–æ—Ä–∞–∂–µ–Ω–∏—è —Ü–µ–ª–∏ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∞ –æ—Å–æ–∑–Ω–∞–µ—Ç —É–≥—Ä–æ–∑—É.

**–°—Ç–∏–ª—å –∏–≥—Ä—ã:**
- –î–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏
- –¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –±–∞—Ñ—Ñ—ã (Hit & Run)
- –û–≥—Ä–æ–º–Ω—ã–π —Ä–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω (—Å–Ω–∞–π–ø–µ—Ä—Å—Ç–≤–æ)
- –ú–æ–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∑–æ–Ω—ã

**–°–ª–∞–±–æ—Å—Ç–∏:**
- –ù–∏–∑–∫–∞—è –∑–∞—â–∏—Ç–∞ (–ª—ë–≥–∫–∞—è –±—Ä–æ–Ω—è)
- –£—è–∑–≤–∏–º–æ—Å—Ç—å –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é
- –¢—Ä–µ–±—É–µ—Ç –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìä –í–µ—Å–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

**–°—É–º–º–∞ –≤–µ—Å–æ–≤:** 4

| –ê—Ç—Ä–∏–±—É—Ç           | –í–µ—Å | –†–æ–ª—å                                    |
|-------------------|-----|-----------------------------------------|
| Agility (AGI)     | 2   | –¢–æ—á–Ω–æ—Å—Ç—å, —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∏          |
| Perception (PER)  | 1   | –î–∞–ª—å–Ω–æ—Å—Ç—å, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω             |
| Strength (STR)    | 1   | –ù–∞—Ç—è–∂–µ–Ω–∏–µ —Ç–µ—Ç–∏–≤—ã, —É—Ä–æ–Ω                  |

---

## ‚öîÔ∏è –¢–∏–ø—ã –æ—Ä—É–∂–∏—è –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã

### 1. Shortbow (–ö–æ—Ä–æ—Ç–∫–∏–π –ª—É–∫)

**–†–æ–ª—å:** Hit & Run, –ú–æ–±–∏–ª—å–Ω–æ—Å—Ç—å

**–¢—Ä–∏–≥–≥–µ—Ä:** `trigger_evasive_shot`

**–°–æ–±—ã—Ç–∏–µ:** `ON_HIT` (–ø—Ä–∏ –ª—é–±–æ–º –ø–æ–ø–∞–¥–∞–Ω–∏–∏)

**–≠—Ñ—Ñ–µ–∫—Ç:** –ù–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–µ–ª–∫–∞ –±–∞—Ñ—Ñ `Evasion Boost`:
- **–í–∞—Ä–∏–∞–Ω—Ç A:** 100% —É–≤–æ—Ä–æ—Ç –æ—Ç —Å–ª–µ–¥—É—é—â–µ–π –∞—Ç–∞–∫–∏
- **–í–∞—Ä–∏–∞–Ω—Ç B:** +2 —Ç–æ–∫–µ–Ω–∞ `dodge`

**–õ–æ–≥–∏–∫–∞:** –í—ã—Å—Ç—Ä–µ–ª–∏–ª –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å–º–µ—Å—Ç–∏–ª—Å—è —Å –ª–∏–Ω–∏–∏ –∞—Ç–∞–∫–∏.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
"trigger_evasive_shot": {
    "event": "ON_HIT",
    "chance": 1.0,
    "effect": "buff_dodge",
    "metadata": {
        "dodge_tokens": 2,
        "duration": 1  # –î–æ –∫–æ–Ω—Ü–∞ —Ä–∞—É–Ω–¥–∞
    }
}
```

**–ë–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- Power: 8-12 (–Ω–∏–∑–∫–∏–π –±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω)
- Spread: 0.15
- Accuracy: +0.05
- Evasion Penalty: 0.0 (–±–µ–∑ —à—Ç—Ä–∞—Ñ–∞)

---

### 2. Longbow (–î–ª–∏–Ω–Ω—ã–π –ª—É–∫)

**–†–æ–ª—å:** –°–Ω–∞–π–ø–µ—Ä, –í–∞–Ω—à–æ—Ç

**–¢—Ä–∏–≥–≥–µ—Ä:** `trigger_sniper_crit`

**–°–æ–±—ã—Ç–∏–µ:** `ON_CRIT`

**–≠—Ñ—Ñ–µ–∫—Ç:** –ú–Ω–æ–∂–∏—Ç–µ–ª—å –∫—Ä–∏—Ç–∞ **x3.0** (–≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ x2.0)

**–õ–æ–≥–∏–∫–∞:** –ü–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –≥–æ–ª–æ–≤—É –∏–ª–∏ —Å–µ—Ä–¥—Ü–µ. –ß–∏—Å—Ç—ã–π —É—Ä–æ–Ω –±–µ–∑ –ª–∏—à–Ω–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
"trigger_sniper_crit": {
    "event": "ON_CRIT",
    "chance": 1.0,
    "effect": "multiply_crit_damage",
    "metadata": {
        "multiplier": 3.0
    }
}
```

**–ë–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- Power: 18-25 (–≤—ã—Å–æ–∫–∏–π –±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω)
- Spread: 0.10 (–Ω–∏–∑–∫–∏–π —Ä–∞–∑–±—Ä–æ—Å)
- Accuracy: +0.10
- Crit Chance: +0.05

---

### 3. Composite Bow (–ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –ª—É–∫)

**–†–æ–ª—å:** –ü—Ä–æ–±–∏—Ç–∏–µ, –°–∏–ª–∞

**–¢—Ä–∏–≥–≥–µ—Ä:** `trigger_heavy_impact`

**–°–æ–±—ã—Ç–∏–µ:** `ON_CRIT`

**–≠—Ñ—Ñ–µ–∫—Ç:**
1. **Stun** (–û–≥–ª—É—à–µ–Ω–∏–µ) –Ω–∞ 1 —Ä–∞—É–Ω–¥
2. **Knockback** ‚Äî —Å–±—Ä–æ—Å —Ñ–ª–∞–≥–∞ `is_engaged` —É –≤—Ä–∞–≥–∞

**–õ–æ–≥–∏–∫–∞:** –°–∏–ª–∞ —É–¥–∞—Ä–∞ —Å–±–∏–≤–∞–µ—Ç —Å –Ω–æ–≥ –∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Ä–∞–≥–∞.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
"trigger_heavy_impact": {
    "event": "ON_CRIT",
    "chance": 1.0,
    "effect": "apply_stun_and_knockback",
    "metadata": {
        "stun_duration": 1,
        "clear_flags": ["is_engaged"]
    }
}
```

**–ë–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- Power: 15-20
- Spread: 0.20
- Accuracy: 0.0
- Requires: Strength ‚â• 12

---

### 4. Light Crossbow (–õ—ë–≥–∫–∏–π –∞—Ä–±–∞–ª–µ—Ç)

**–†–æ–ª—å:** Off-hand, –°–∫–æ—Ä–æ—Å—Ç—å

**–¢—Ä–∏–≥–≥–µ—Ä:** `trigger_double_tap`

**–°–æ–±—ã—Ç–∏–µ:** `ON_HIT`

**–≠—Ñ—Ñ–µ–∫—Ç:** –®–∞–Ω—Å 50% —Å–æ–≤–µ—Ä—à–∏—Ç—å –≤—Ç–æ—Ä–æ–π –≤—ã—Å—Ç—Ä–µ–ª –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (Multi-Attack)

**–õ–æ–≥–∏–∫–∞:** –ë—ã—Å—Ç—Ä—ã–π –≤–∑–≤–æ–¥ –∏–ª–∏ –º–µ—Ö–∞–Ω–∏–∑–º –º–∞–≥–∞–∑–∏–Ω–∞.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
"trigger_double_tap": {
    "event": "ON_HIT",
    "chance": 0.5,
    "effect": "grant_bonus_attack",
    "metadata": {
        "bonus_attacks": 1,
        "damage_multiplier": 1.0
    }
}
```

**–ë–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- Power: 10-15
- Spread: 0.15
- Valid Slots: `["main_hand", "off_hand"]`

---

### 5. Heavy Crossbow (–¢—è–∂—ë–ª—ã–π –∞—Ä–±–∞–ª–µ—Ç)

**–†–æ–ª—å:** Anti-Tank

**–¢—Ä–∏–≥–≥–µ—Ä:** `trigger_armor_pierce`

**–°–æ–±—ã—Ç–∏–µ:** `ON_HIT` (–¥–∞–∂–µ –±–µ–∑ –∫—Ä–∏—Ç–∞)

**–≠—Ñ—Ñ–µ–∫—Ç:** –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç **100% Flat Armor** —Ü–µ–ª–∏

**–õ–æ–≥–∏–∫–∞:** –ë–æ–ª—Ç –ø—Ä–æ—à–∏–≤–∞–µ—Ç –ª–∞—Ç—ã –Ω–∞—Å–∫–≤–æ–∑—å.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
"trigger_armor_pierce": {
    "event": "ON_HIT",
    "chance": 1.0,
    "effect": "ignore_flat_armor",
    "metadata": {
        "armor_ignored_percent": 1.0
    }
}
```

**–ë–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- Power: 25-35 (–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–Ω)
- Spread: 0.10
- Accuracy: +0.15
- Evasion Penalty: -0.10 (—Ç—è–∂—ë–ª–æ–µ –æ—Ä—É–∂–∏–µ)
- Grip: "2h"

---

## üíé –ù–æ–≤—ã–µ —Ñ–ª–∞–≥–∏ –∏ –º–µ—Ö–∞–Ω–∏–∫–∏

### is_engaged
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§–ª–∞–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è "–í –±–ª–∏–∂–Ω–µ–º –±–æ—é"

**–õ–æ–≥–∏–∫–∞:**
- –ù–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –≤—Ä–∞–≥ —É–¥–∞—Ä–∏–ª –≤–∞—Å –≤ –ø—Ä–æ—à–ª–æ–º —Ö–æ–¥—É
- –°–Ω–∏–∂–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ç—Ä–µ–ª–∫–æ–≤–æ–≥–æ –æ—Ä—É–∂–∏—è (—à—Ç—Ä–∞—Ñ -20%)
- –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –∏–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä–µ Knockback

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
if ctx.attacker.flags.get("is_engaged"):
    ctx.accuracy -= 0.2
```

### evasion_boost
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É–≤–æ—Ä–æ—Ç

**–õ–æ–≥–∏–∫–∞:**
- –°–ª–µ–¥—É—é—â–∞—è –∞—Ç–∞–∫–∞ –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–∂—É –ø—Ä–æ–º–∞—Ö–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑, –∑–∞—Ç–µ–º —Ñ–ª–∞–≥ —Å–Ω–∏–º–∞–µ—Ç—Å—è

### multi_attack
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–Ω–µ—Å—Ç–∏ —É—Ä–æ–Ω –¥–≤–∞–∂–¥—ã –∑–∞ –æ–¥–∏–Ω Action

**–õ–æ–≥–∏–∫–∞:**
- –ü–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∞—Ç–∞–∫–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è
- –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å –ø–æ–ª–Ω—ã–º —É—Ä–æ–Ω–æ–º –∏–ª–∏ –ø–æ–Ω–∏–∂–µ–Ω–Ω—ã–º (50-75%)

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ)

### ¬´–û—Ö–æ—Ç–Ω–∏—á–∏–π –ª—É–∫¬ª
```python
BaseItemDTO(
    id="shortbow_hunter",
    name_ru="–û—Ö–æ—Ç–Ω–∏—á–∏–π –ª—É–∫",
    slot="main_hand",
    type="weapon",
    
    base_power=10,
    damage_spread=0.15,
    
    triggers=["trigger_evasive_shot"],
    
    allowed_materials=["woods"],
    
    narrative_tags=["bow", "agile", "hunter"]
)
```

### ¬´–≠–ª—å—Ñ–∏–π—Å–∫–∏–π –¥–ª–∏–Ω–Ω—ã–π –ª—É–∫¬ª
```python
BaseItemDTO(
    id="longbow_elven",
    name_ru="–≠–ª—å—Ñ–∏–π—Å–∫–∏–π –¥–ª–∏–Ω–Ω—ã–π –ª—É–∫",
    slot="main_hand",
    type="weapon",
    
    base_power=22,
    damage_spread=0.10,
    
    triggers=["trigger_sniper_crit"],
    
    implicit_bonuses={
        "accuracy": 0.10,
        "crit_chance": 0.05
    },
    
    allowed_materials=["woods"],
    
    narrative_tags=["bow", "elven", "masterwork", "sniper"]
)
```

### ¬´–û—Å–∞–¥–Ω—ã–π –∞—Ä–±–∞–ª–µ—Ç¬ª
```python
BaseItemDTO(
    id="heavy_crossbow_siege",
    name_ru="–û—Å–∞–¥–Ω—ã–π –∞—Ä–±–∞–ª–µ—Ç",
    slot="two_hand",
    type="weapon",
    
    base_power=30,
    damage_spread=0.10,
    
    triggers=["trigger_armor_pierce"],
    
    implicit_bonuses={
        "accuracy": 0.15,
        "evasion_penalty": -0.10
    },
    
    allowed_materials=["ingots", "woods"],
    
    narrative_tags=["crossbow", "siege", "anti-armor"]
)
```

---

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π MVP
1. ‚úÖ `trigger_evasive_shot` ‚Äî –±–∞–∑–æ–≤–∞—è –º–æ–±–∏–ª—å–Ω–æ—Å—Ç—å
2. ‚úÖ `trigger_sniper_crit` ‚Äî —Å–Ω–∞–π–ø–µ—Ä—Å–∫–∏–π —É—Ä–æ–Ω
3. ‚úÖ `trigger_armor_pierce` ‚Äî –ø—Ä–æ–±–∏—Ç–∏–µ –±—Ä–æ–Ω–∏

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
4. ‚è≥ `trigger_double_tap` ‚Äî –º—É–ª—å—Ç–∏-–∞—Ç–∞–∫–∞
5. ‚è≥ `trigger_heavy_impact` ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å (stun + knockback)
6. ‚è≥ –§–ª–∞–≥ `is_engaged` ‚Äî —à—Ç—Ä–∞—Ñ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é

---

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤:** [README.md](./README.md)
- **DTO –ø—Ä–µ–¥–º–µ—Ç–æ–≤:** [../01_item_dto_reference.md](../01_item_dto_reference.md)
- **–ë–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:** `/docs/architecture/combat_system_v3/`

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –Ø–Ω–≤–∞—Ä—å 2026  
**–°—Ç–∞—Ç—É—Å:** Design Draft ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ