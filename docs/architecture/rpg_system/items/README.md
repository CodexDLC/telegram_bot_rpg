# Items System (–ü—Ä–µ–¥–º–µ—Ç—ã)

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ `Telegram_Bot_RPG` –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞. –ü—Ä–µ–¥–º–µ—Ç –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ –µ–¥–∏–Ω–∞—è –∑–∞–ø–∏—Å—å, –∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–µ–¥–º–µ—Ç–∞:**
1. **Base Item (–ë–æ–ª–≤–∞–Ω–∫–∞):** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø (–ú–µ—á), —Å–ª–æ—Ç (Main Hand) –∏ –±–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
2. **Material (–ú–∞—Ç–µ—Ä–∏–∞–ª):** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏—Ä (Tier), –ø—Ä–æ—á–Ω–æ—Å—Ç—å –∏ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ —Å—Ç–∞—Ç–æ–≤
3. **Affixes (–ê—Ñ—Ñ–∏–∫—Å—ã):** –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞, –¥–∞—é—â–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã

---

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (–Ø–Ω–≤–∞—Ä—å 2026)

‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Pydantic DTO:** –ó–∞–≤–µ—Ä—à–µ–Ω–∞  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RBC v3.1:** –ü—Ä–µ–¥–º–µ—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –Ω–æ–≤–æ–π –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π  
‚ö†Ô∏è **ItemAssembler:** –¢—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–¥ –Ω–æ–≤—ã–µ –ø–æ–ª—è (`power`, `spread`, `triggers`)  
‚ö†Ô∏è **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ –∏–∑ `drafts/` –≤ –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (RBC v3.1)

### 1. Core DTO —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

#### ItemCoreData (–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å)
```python
class ItemCoreData(BaseModel):
    name: str
    description: str
    base_price: int
    components: ItemComponents | None      # {base_id, material_id, essence_id}
    durability: ItemDurability | None      # {current, max}
    narrative_tags: list[str]
    implicit_bonuses: dict[str, float]     # –ë–æ–Ω—É—Å—ã –æ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–∞/–±–∞–∑—ã
    bonuses: dict[str, float]              # –ë–æ–Ω—É—Å—ã –æ—Ç –∞—Ñ—Ñ–∏–∫—Å–æ–≤
```

#### WeaponData (–û—Ä—É–∂–∏–µ)
```python
class WeaponData(ItemCoreData):
    # –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —É—Ä–æ–Ω–∞
    power: float                  # –ë–∞–∑–æ–≤–∞—è —Å–∏–ª–∞ (–≤–º–µ—Å—Ç–æ damage_min/max)
    spread: float = 0.1           # –†–∞–∑–±—Ä–æ—Å (0.1 = ¬±10%)
    accuracy: float = 0.0         # –ë–∞–∑–æ–≤–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
    
    # –ú–µ—Ö–∞–Ω–∏–∫–∞ –±–æ—è
    crit_chance: float = 0.0
    parry_chance: float = 0.0
    evasion_penalty: float = 0.0
    
    # –¢—Ä–∏–≥–≥–µ—Ä—ã (—Ç–æ–ª—å–∫–æ —É –æ—Ä—É–∂–∏—è!)
    triggers: list[str] = []      # ["trigger_bleed", "trigger_vampirism"]
    
    # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
    grip: str = "1h"              # "1h", "2h"
    subtype: str                  # "sword", "axe", "bow"
    related_skill: str | None     # "skill_swords"
    valid_slots: list[str]
```

**–ü—Ä–∏–º–µ—Ä:**
```python
# –ñ–µ–ª–µ–∑–Ω—ã–π –¥–ª–∏–Ω–Ω—ã–π –º–µ—á —Å –∞—Ñ—Ñ–∏–∫—Å–æ–º –≤–∞–º–ø–∏—Ä–∏–∑–º–∞
WeaponData(
    name="–ñ–µ–ª–µ–∑–Ω—ã–π –¥–ª–∏–Ω–Ω—ã–π –º–µ—á <Vampirism>",
    power=15.0,           # 10 (base) * 1.5 (iron tier_mult)
    spread=0.2,           # –û—Ç –±–∞–∑—ã longsword
    triggers=["trigger_bleed"],  # –û—Ç –±–∞–∑—ã
    bonuses={"trigger_vampirism": True},  # –û—Ç –∞—Ñ—Ñ–∏–∫—Å–∞
    grip="1h",
    subtype="sword"
)
```

#### ArmorData (–ë—Ä–æ–Ω—è)
```python
class ArmorData(ItemCoreData):
    # –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∑–∞—â–∏—Ç—ã
    power: float                  # Flat Damage Reduction
    
    # –ú–µ—Ö–∞–Ω–∏–∫–∞ –∑–∞—â–∏—Ç—ã
    block_chance: float = 0.0     # –¢–æ–ª—å–∫–æ –¥–ª—è —â–∏—Ç–æ–≤
    evasion_penalty: float = 0.0  # –®—Ç—Ä–∞—Ñ –∫ —É–≤–æ—Ä–æ—Ç–∞–º (—Ç—è–∂—ë–ª–∞—è –±—Ä–æ–Ω—è)
    dodge_cap_mod: float = 0.0    # –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–ø–∞ —É–≤–æ—Ä–æ—Ç–∞
    
    # –¢—Ä–∏–≥–≥–µ—Ä–æ–≤ –ù–ï–¢ (–∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å–∫–∏–ª–ª—ã)
    triggers: list[str] = []      # –í—Å–µ–≥–¥–∞ –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
    
    # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
    subtype: str                  # "heavy", "light", "shield"
    related_skill: str | None     # "skill_heavy_armor"
    valid_slots: list[str]
```

**–í–∞–∂–Ω–æ:** –©–∏—Ç—ã ‚Äî —ç—Ç–æ –æ—Ä—É–∂–∏–µ (`ItemType.WEAPON`) —Å `grip="off_hand"` –∏ `power=0`, –Ω–æ —Å `block_chance > 0`.

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞

### 1. ItemAssembler.assemble_equipment()

```
Base Item (longsword)
  ‚îú‚îÄ base_power: 10
  ‚îú‚îÄ damage_spread: 0.2
  ‚îî‚îÄ triggers: ["trigger_bleed"]
       +
Material (iron, tier 1)
  ‚îú‚îÄ tier_mult: 1.5
  ‚îî‚îÄ slots: 2
       =
WeaponData
  ‚îú‚îÄ power: 15.0 (10 * 1.5)
  ‚îú‚îÄ spread: 0.2
  ‚îî‚îÄ triggers: ["trigger_bleed"]
       +
Affixes (vampirism bundle)
  ‚îú‚îÄ cost_slots: 2
  ‚îî‚îÄ effects: ["vampirism"]
       =
FINAL WeaponData
  ‚îú‚îÄ power: 15.0
  ‚îú‚îÄ spread: 0.2
  ‚îú‚îÄ triggers: ["trigger_bleed"]
  ‚îî‚îÄ bonuses: {"trigger_vampirism": True, "physical_damage_bonus": 0.05}
```

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**  
ItemAssembler –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `dict[str, Any]` —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –ø–æ–ª—è–º–∏ (`damage_min`, `damage_max`).  
–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥ –Ω–æ–≤—ã–µ DTO.

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π (RBC v3.1)

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö: –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å ‚Üí –ë–æ–π

```
1. InventoryItemDTO (–ë–î)
    ‚îú‚îÄ inventory_id: 123
    ‚îú‚îÄ item_type: "weapon"
    ‚îî‚îÄ data: WeaponData {...}
         ‚Üì
2. ContextAssembler (–ø–µ—Ä–µ–¥ –±–æ–µ–º)
    ‚îú‚îÄ –ò–∑–≤–ª–µ–∫–∞–µ—Ç WeaponData.power
    ‚îú‚îÄ –ò–∑–≤–ª–µ–∫–∞–µ—Ç WeaponData.triggers
    ‚îî‚îÄ –ò–∑–≤–ª–µ–∫–∞–µ—Ç bonuses
         ‚Üì
3. Redis v:raw (–±–æ–µ–≤–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç)
    ‚îú‚îÄ modifiers.main_hand_damage_base: {"source": {"item:123": 15.0}}
    ‚îî‚îÄ modifiers.physical_damage_bonus: {"source": {"item:123": "*1.05"}}
         ‚Üì
4. StatsEngine (–≤–æ –≤—Ä–µ–º—è –±–æ—è)
    ‚îî‚îÄ –°—á–∏—Ç–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π —É—Ä–æ–Ω —Å —É—á—ë—Ç–æ–º –≤—Å–µ—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
```

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
```python
WeaponData.triggers = ["trigger_bleed"]
    ‚Üì
ContextBuilder (–≤ –º–æ–º–µ–Ω—Ç –∞—Ç–∞–∫–∏)
    ‚Üì
ctx.triggers.trigger_bleed = True
    ‚Üì
CombatResolver (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è)
    ‚Üì
if ctx.triggers.trigger_bleed and is_crit:
    apply_bleed_effect(target)
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
apps/game_core/resources/game_data/items/
‚îú‚îÄ‚îÄ raw_resource/          # –†—É–¥–∞, –∫–æ–∂–∞, —Ç—Ä–∞–≤–∞ (ResourceDTO)
‚îÇ   ‚îú‚îÄ‚îÄ ores.py
‚îÇ   ‚îú‚îÄ‚îÄ hides.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ material/              # –°–ª–∏—Ç–∫–∏, –∫–æ–∂–∞ (MaterialDTO)
‚îÇ   ‚îú‚îÄ‚îÄ ingots.py
‚îÇ   ‚îú‚îÄ‚îÄ leathers.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ base_item/             # –ë–æ–ª–≤–∞–Ω–∫–∏ –æ—Ä—É–∂–∏—è/–±—Ä–æ–Ω–∏ (BaseItemDTO)
‚îÇ   ‚îú‚îÄ‚îÄ weapons.py
‚îÇ   ‚îú‚îÄ‚îÄ armor.py
‚îÇ   ‚îî‚îÄ‚îÄ accessories.py
‚îú‚îÄ‚îÄ affixes/               # –ë–∞–Ω–¥–ª—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (BundleData)
‚îÇ   ‚îú‚îÄ‚îÄ bundles_2_slots.py
‚îÇ   ‚îú‚îÄ‚îÄ bundles_3_slots.py
‚îÇ   ‚îî‚îÄ‚îÄ bundles_4_slots.py
‚îú‚îÄ‚îÄ affix_config.py        # –†–µ–µ—Å—Ç—Ä —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (EffectData)
‚îú‚îÄ‚îÄ bases.py               # –°–±–æ—Ä–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –±–∞–∑
‚îú‚îÄ‚îÄ materials.py           # –°–±–æ—Ä–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
‚îú‚îÄ‚îÄ raw_resources.py       # –°–±–æ—Ä–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä —Ä–µ—Å—É—Ä—Å–æ–≤
‚îú‚îÄ‚îÄ rarity_config.py       # –ú–∞–ø–ø–∏–Ω–≥ Tier ‚Üí ItemRarity
‚îî‚îÄ‚îÄ schemas.py             # DTO (ResourceDTO, MaterialDTO, BaseItemDTO)
```

---

## üß© –¢—Ä–∏–≥–≥–µ—Ä—ã –æ—Ä—É–∂–∏—è

–¢—Ä–∏–≥–≥–µ—Ä—ã ‚Äî —ç—Ç–æ —É—Å–ª–æ–≤–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤–æ –≤—Ä–µ–º—è –±–æ—è.

**–ü—Ä–∏–º–µ—Ä—ã:**
- `trigger_bleed` ‚Äî –ü—Ä–∏ –∫—Ä–∏—Ç–µ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ (DoT)
- `trigger_vampirism` ‚Äî –ü—Ä–∏ —É–¥–∞—Ä–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç HP –∞—Ç–∞–∫—É—é—â–µ–º—É
- `trigger_armor_breach` ‚Äî –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —á–∞—Å—Ç—å –±—Ä–æ–Ω–∏ —Ü–µ–ª–∏

**–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è:**
- **–ë–∞–∑–∞ –æ—Ä—É–∂–∏—è** (`BaseItemDTO.triggers`) ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã —Ç–∏–ø–∞ –æ—Ä—É–∂–∏—è
- **–ê—Ñ—Ñ–∏–∫—Å—ã** (`bonuses["trigger_vampirism"]`) ‚Äî –º–∞–≥–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –æ—Ç –∑–∞—Ç–æ—á–∫–∏

**–ì–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:**
- `/docs/architecture/drafts/items/` ‚Äî –¥–∏–∑–∞–π–Ω-–¥–æ–∫—É–º–µ–Ω—Ç—ã (archery_triggers.md, swords_triggers.md, ...)
- `/apps/game_core/resources/game_data/triggers/` ‚Äî –∫–æ–¥ (TriggerRegistry, TRIGGER_RULES)

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:** –ü–µ—Ä–µ–Ω–æ—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ `/docs/rpg_system/items/weapon_triggers/`

---

## üöß –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ItemAssembler —É—Å—Ç–∞—Ä–µ–ª
**–ü—Ä–æ–±–ª–µ–º–∞:**  
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `dict` —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –ø–æ–ª—è–º–∏ (`damage_min`, `damage_max`, `protection`).

**–†–µ—à–µ–Ω–∏–µ:**  
–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø–æ–¥ –Ω–æ–≤—ã–µ DTO (`power`, `spread`, `triggers`).

**–°—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ (–∂–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –±–æ–µ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞).

---

### 2. BaseItemDTO.triggers ‚Äî –ª–∏—à–Ω–µ–µ –ø–æ–ª–µ?
**–ü—Ä–æ–±–ª–µ–º–∞:**  
–í `BaseItemDTO` –µ—Å—Ç—å `triggers: list[str]`, –Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **—Ç–æ–ª—å–∫–æ —É –æ—Ä—É–∂–∏—è**.

**–†–µ—à–µ–Ω–∏–µ:**  
–£–±—Ä–∞—Ç—å –∏–∑ `BaseItemDTO`, –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ `WeaponData`.

**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç –æ–±—Å—É–∂–¥–µ–Ω–∏—è.

---

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º—ë–Ω —á–µ—Ä–µ–∑ LLM
**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–æ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–º–µ–Ω–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø—Ä–∏ –∫—Ä–∞—Ñ—Ç–µ –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ).

**–†–µ—à–µ–Ω–∏–µ:**  
–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ `02_item_creation_pipeline.md`.

**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è.

---

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–§–∏–ª–æ—Å–æ—Ñ–∏—è —Å–∏—Å—Ç–µ–º—ã:** [00_items_manifesto.md](./00_items_manifesto.md)
- **–í–∞–ª—é—Ç–∞:** [03_currency_philosophy.md](./03_currency_philosophy.md)
- **–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ DTO:** [migration_to_dto.md](./migration_to_dto.md)
- **–¢—Ä–∏–≥–≥–µ—Ä—ã:** `/docs/architecture/drafts/items/` (–≤—Ä–µ–º–µ–Ω–Ω–æ)
- **–ë–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:** `/docs/architecture/combat_system_v3/`

---

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

1. **–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å ItemAssembler** ‚Äî –ø–æ–¥ –Ω–æ–≤—ã–µ DTO (WeaponData, ArmorData)
2. **–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** ‚Äî –∏–∑ `drafts/items/` –≤ `rpg_system/items/`
3. **–°–æ–∑–¥–∞—Ç—å TriggerRegistry** ‚Äî –∫–æ–¥ –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –æ—Ä—É–∂–∏—è
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é** ‚Äî –∫–∞–∫ –ø—Ä–µ–¥–º–µ—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å ContextAssembler
5. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã** ‚Äî –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤, —Ç–µ—Å—Ç—ã

---

## ü§ù –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –æ—Ä—É–∂–∏—è:**
1. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ `base_item/weapons.py`
2. –£–∫–∞–∑–∞—Ç—å `triggers` (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã)
3. –ü—Ä–æ–ø–∏—Å–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä –≤ `triggers/definitions/weapon_triggers.py`
4. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `weapon_triggers/{weapon_type}.md`

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∞—Ñ—Ñ–∏–∫—Å:**
1. –°–æ–∑–¥–∞—Ç—å `EffectData` –≤ `affix_config.py` (–∞—Ç–æ–º–∞—Ä–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç)
2. –°–æ–∑–¥–∞—Ç—å `BundleData` –≤ `affixes/bundles_X_slots.py` (–∫–æ–º–±–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤)
3. –£–∫–∞–∑–∞—Ç—å `ingredient_id` (—ç—Å—Å–µ–Ω—Ü–∏—è –¥–ª—è –∫—Ä–∞—Ñ—Ç–∞)
4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ `crafting/affixes.md`

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –Ø–Ω–≤–∞—Ä—å 2026  
**–°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥ RBC v3.1
