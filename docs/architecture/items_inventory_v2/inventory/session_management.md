# Inventory Session Management

## üìã –û–±–∑–æ—Ä

–û–ø–∏—Å–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–Ω—ã—Ö —Å–µ—Å—Å–∏–π –≤ Redis, –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (Dirty Flags) –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –ë–î.

---

## üèóÔ∏è InventorySessionManager

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Redis —Å–µ—Å—Å–∏—è–º–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `apps/game_core/modules/inventory/inventory/logic/inventory_session_manager.py`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–π —Å Redis (`session:inventory:{char_id}`)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TTL —Å–µ—Å—Å–∏–π
- –ú–µ—Ö–∞–Ω–∏–∑–º Dirty Flags
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ë–î –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–µ—Å—Å–∏–∏

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–µ—Å—Å–∏–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏

```
User –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
  ‚Üì
InventoryService.view_inventory(char_id)
  ‚Üì
SessionManager.get_session(char_id) ‚Üí None (—Å–µ—Å—Å–∏–∏ –Ω–µ—Ç)
  ‚Üì
Service –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç snapshot —á–µ—Ä–µ–∑ router
  ‚Üì
ContextAssembler –≥–æ—Ç–æ–≤–∏—Ç temp:inventory:{uuid}
  ‚Üì
SessionManager.create_session_from_snapshot(char_id, snapshot)
  ‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Redis: session:inventory:{char_id}
  ‚Üì
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ TTL (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 –º–∏–Ω—É—Ç)
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏:**
```python
session:inventory:{char_id} = {
    "metadata": {
        "char_id": 1,
        "loaded_at": 1704067200,  # Unix timestamp
        "dirty": False             # –§–ª–∞–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    },
    "equipped": {
        "main_hand": {...},        # ItemDTO –∏–ª–∏ None
        "off_hand": {...},
        "head": {...},
        "chest": {...},
        "legs": {...},
        "feet": {...},
        "accessory_1": {...},
        "accessory_2": {...}
    },
    "backpack": [
        {...},  # InventoryItemDTO
        {...}
    ],
    "quick_slots": [
        {...},  # Consumable
        None,
        {...}
    ]
}
```

---

### 2. –†–∞–±–æ—Ç–∞ —Å —Å–µ—Å—Å–∏–µ–π

**–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
```python
session = await session_manager.get_session(char_id)
if not session:
    # –°–µ—Å—Å–∏—è –ø—Ä–æ—Ç—É—Ö–ª–∞ –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    # –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —á–µ—Ä–µ–∑ snapshot
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
```python
# 1. –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏—é
session = await session_manager.get_session(char_id)

# 2. –ò–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
# (–ª–æ–≥–∏–∫–∞ –≤ InventoryService –∏–ª–∏ InventoryLogic)
session["equipped"]["main_hand"] = new_weapon
session["backpack"].remove(weapon_to_equip)

# 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å —Ñ–ª–∞–≥–æ–º dirty
await session_manager.save_session(char_id, session, dirty=True)
```

---

### 3. –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–µ—Å—Å–∏–∏

```
User –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
  ‚Üì
SessionManager.sync_to_db(char_id)
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞: session["metadata"]["dirty"] == True?
  ‚Üì
–ï—Å–ª–∏ False ‚Üí –æ—á–∏—Å—Ç–∫–∞ Redis, –≤—ã—Ö–æ–¥
  ‚Üì
–ï—Å–ª–∏ True:
  ‚Üì
–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ë–î
  ‚Üì
Repository.update_character_inventory(char_id, data)
  ‚Üì
–°–±—Ä–æ—Å dirty=False
  ‚Üì
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –æ—á–∏—Å—Ç–∫–∞ Redis Session
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –û—á–∏—Å—Ç–∫–∞ Redis –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–∞ (TTL), —á—Ç–æ–±—ã –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–Ω–æ–≤–æ.

---

## üö© –ú–µ—Ö–∞–Ω–∏–∑–º Dirty Flags

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–µ—Å—Å–∏–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏ –≤ –ë–î.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

**–ß–∏—Å—Ç–∞—è —Å–µ—Å—Å–∏—è (dirty=False):**
- –ò–≥—Ä–æ–∫ —Ç–æ–ª—å–∫–æ –ø–æ—Å–º–æ—Ç—Ä–µ–ª –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
- –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ –±—ã–ª–æ
- –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ ‚Üí **–ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î**

**–ì—Ä—è–∑–Ω–∞—è —Å–µ—Å—Å–∏—è (dirty=True):**
- –ò–≥—Ä–æ–∫ —ç–∫–∏–ø–∏—Ä–æ–≤–∞–ª –ø—Ä–µ–¥–º–µ—Ç
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∑–µ–ª—å–µ
- –ü–µ—Ä–µ–º–µ—Å—Ç–∏–ª –ø—Ä–µ–¥–º–µ—Ç—ã
- –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ ‚Üí **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î**

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞

–§–ª–∞–≥ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ª—é–±–æ–π **–º—É—Ç–∏—Ä—É—é—â–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:**
- `equip_item()`
- `unequip_item()`
- `use_consumable()`
- `move_to_quick_slot()`
- `drop_item()`

```python
async def equip_item(self, char_id: int, item_id: int, slot: str | None):
    session = await self.session_manager.get_session(char_id)

    # –õ–æ–≥–∏–∫–∞ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
    # ...

    # –ü–æ–º–µ—á–∞–µ–º —Å–µ—Å—Å–∏—é –∫–∞–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—É—é
    session["metadata"]["dirty"] = True
    await self.session_manager.save_session(char_id, session)
```

### –°–±—Ä–æ—Å —Ñ–ª–∞–≥–∞

–§–ª–∞–≥ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –ë–î:
```python
async def sync_to_db(self, char_id: int):
    session = await self.get_session(char_id)

    if not session["metadata"]["dirty"]:
        return  # –ù–µ—á–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å

    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
    await self.repo.update_inventory(char_id, session)

    # –°–±—Ä–æ—Å —Ñ–ª–∞–≥–∞
    session["metadata"]["dirty"] = False
    await self.save_session(char_id, session)
```

---

## ‚è±Ô∏è TTL –∏ –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ TTL

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 –º–∏–Ω—É—Ç):
```python
await redis.setex(
    f"session:inventory:{char_id}",
    ttl=1800,  # 30 –º–∏–Ω—É—Ç
    value=json.dumps(session)
)
```

### –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TTL

–ü—Ä–∏ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ TTL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:
```python
async def get_session(self, char_id: int) -> dict | None:
    key = f"session:inventory:{char_id}"
    data = await self.redis.get(key)

    if data:
        # –ü—Ä–æ–¥–ª–µ–≤–∞–µ–º TTL
        await self.redis.expire(key, 1800)
        return json.loads(data)

    return None
```

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ—á–∏—Å—Ç–∫–∏

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞**
- –°—Ä–∞–∑—É –ø–æ—Å–ª–µ `sync_to_db()` —É–¥–∞–ª—è–µ–º —Å–µ—Å—Å–∏—é
- –ú–∏–Ω—É—Å: –∫–∞–∂–¥—ã–π –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥ ‚Üí –Ω–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î

**–í–∞—Ä–∏–∞–Ω—Ç 2: –õ–µ–Ω–∏–≤–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
- –û—Å—Ç–∞–≤–ª—è–µ–º —Å–µ—Å—Å–∏—é –≤ Redis –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—Ö–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à
- –ü–ª—é—Å: –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤

---

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ë–î

### –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

1. **–Ø–≤–Ω—ã–π –≤—ã—Ö–æ–¥ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–∫—Ä—ã–ª UI)
2. **–ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥—Ä—É–≥–æ–π –º–æ–¥—É–ª—å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞—á–∞–ª–æ –±–æ—è)
3. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω–æ–≤—ã–π worker** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –¥–æ–ª–≥–∏—Ö —Å–µ—Å—Å–∏–π)
4. **–í—ã—Ö–æ–¥ –∏–∑ –∏–≥—Ä—ã**

### –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ë–î

```python
async def sync_to_db(self, char_id: int):
    session = await self.get_session(char_id)

    if not session["metadata"]["dirty"]:
        return

    # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    equipped_ids = {
        slot: item["id"] if item else None
        for slot, item in session["equipped"].items()
    }

    backpack_ids = [item["id"] for item in session["backpack"]]
    quick_slot_ids = [item["id"] if item else None for item in session["quick_slots"]]

    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Repository
    await self.repo.update_inventory(
        char_id=char_id,
        equipped=equipped_ids,
        backpack=backpack_ids,
        quick_slots=quick_slot_ids
    )

    # –°–±—Ä–æ—Å —Ñ–ª–∞–≥–∞
    session["metadata"]["dirty"] = False
    await self.save_session(char_id, session)
```

---

## üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ü–æ—Ç–µ—Ä—è —Å–µ—Å—Å–∏–∏ (Redis —É–ø–∞–ª)

```python
async def get_inventory_view(self, char_id: int):
    session = await self.session_manager.get_session(char_id)

    if not session:
        # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î —á–µ—Ä–µ–∑ snapshot
        session = await self._load_from_db(char_id)

    return self.formatter.format_for_ui(session)
```

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ —Å–µ—Å—Å–∏—è –ø–æ—Ç–µ—Ä—è–Ω–∞ **–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** (Redis —É–ø–∞–ª –¥–æ `sync_to_db`):
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ—Ä—è—é—Ç—Å—è
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ ‚Äî —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
- **–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω–æ–≤—ã–π worker –¥–ª—è long-living sessions

### –î–≤–æ–π–Ω–∞—è —Å–µ—Å—Å–∏—è (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ)

–ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –æ—Ç–∫—Ä—ã–ª –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –≤ –¥–≤—É—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
- –ö–∞–∂–¥–∞—è —Å–µ—Å—Å–∏—è –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π snapshot
- –ü–æ—Å–ª–µ–¥–Ω–∏–π `sync_to_db()` –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- **–†–µ—à–µ–Ω–∏–µ:** –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (lock) –Ω–∞ —É—Ä–æ–≤–Ω–µ Redis –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **Redis-First –ø–æ–¥—Ö–æ–¥**
   - –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (Redis)
   - –ë–î –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

2. **Lazy Write (Dirty Flags)**
   - –ü–∏—à–µ–º –≤ –ë–î —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ PostgreSQL

3. **TTL –¥–ª—è –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏**
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫—É –ø–∞–º—è—Ç–∏ Redis
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π

4. **Snapshot —á–µ—Ä–µ–∑ ContextAssembler**
   - Inventory –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î –Ω–∞–ø—Ä—è–º—É—é
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π** (`COUNT session:inventory:*`)
- **–°—Ä–µ–¥–Ω–∏–π TTL —Å–µ—Å—Å–∏–π**
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ dirty —Å–µ—Å—Å–∏–π**
- **–ß–∞—Å—Ç–æ—Ç–∞ sync_to_db (writes/sec)**
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π** (load_from_db –≤–º–µ—Å—Ç–æ Redis)

---

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Inventory Architecture:** [./inventory_architecture.md](./inventory_architecture.md)
- **Gateway API:** [./gateway.md](./gateway.md)
- **Formatting and UI:** [./formatting_and_ui.md](./formatting_and_ui.md)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –Ø–Ω–≤–∞—Ä—å 2026
**–°—Ç–∞—Ç—É—Å:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ñ–∞–∑–∞
