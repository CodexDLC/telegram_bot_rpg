# üíâ Dependency Injection (DI)

‚¨ÖÔ∏è [–ù–∞–∑–∞–¥](README.md)

> **Source:** `apps/common/core/container.py`

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∞–º–æ–ø–∏—Å–Ω—ã–π DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

## üèóÔ∏è AppContainer
–ö–ª–∞—Å—Å `AppContainer` —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä–Ω–µ–º –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏. –û–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ `Dispatcher`.

### Responsibilities
1.  **Singleton Management:** –•—Ä–∞–Ω–∏—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `db_engine`, `redis_client`, `settings`.
2.  **Factory Methods:** –°–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ –∑–∞–ø—Ä–æ—Å—É, –≤–Ω–µ–¥—Ä—è—è –≤ –Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
    *   `get_combat_client(session)`
    *   `get_inventory_client(session)`
3.  **Legacy Support:** –û–±–µ—Ä—Ç—ã–≤–∞–µ—Ç `CoreContainer` –∏–∑ `game_core` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

## üîÑ Usage in Handlers
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö —á–µ—Ä–µ–∑ `dp` –∏–ª–∏ middleware (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏).
–û–±—ã—á–Ω–æ —Ö—ç–Ω–¥–ª–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–∂–µ –≥–æ—Ç–æ–≤—ã–π `Client` –∏–ª–∏ `Orchestrator`, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º.
