# RBC Architecture: Redis Data Structure (v2.0)

## ÐšÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ð¸Ñ
"Redis Based Combat" (RBC) Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·ÑƒÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÐºÐ°Ðº Ñ„Ð°Ð¹Ð»Ð¾Ð²ÑƒÑŽ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Redis. Ð’ÑÐµ ÐºÐ»ÑŽÑ‡Ð¸ Ð¿Ñ€Ð¸Ð²ÑÐ·Ð°Ð½Ñ‹ Ðº `session_id`. Ð¥Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¾ Ð¿Ð¾ Ñ‡Ð°ÑÑ‚Ð¾Ñ‚Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ (Static vs Dynamic) Ð¸ Ð·Ð¾Ð½Ð°Ð¼ Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ (Math vs Action vs Vitals).

---

## ðŸ“‚ 1. ÐšÐ¾Ñ€Ð½ÐµÐ²Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° (root)
**ÐŸÐ°Ñ‚Ñ‚ÐµÑ€Ð½:** `combat:rbc:{session_id}:*`
ÐšÐ°Ð¶Ð´Ð°Ñ ÑÐµÑÑÐ¸Ñ â€” ÑÑ‚Ð¾ Ð¸Ð·Ð¾Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²Ð¾ Ð¸Ð¼ÐµÐ½.

---

## ðŸ“„ 2. ÐœÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¡ÐµÑÑÐ¸Ð¸ (meta)
**Ð¢Ð¸Ð¿:** `HASH`
**ÐšÐ»ÑŽÑ‡:** `combat:rbc:{sid}:meta`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ:** Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ„Ð»Ð°Ð³Ð¸ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ð±Ð¾Ñ, ÑÐ¿Ð¸ÑÐºÐ¸ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð² Ð¸ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ.

| ÐŸÐ¾Ð»Ðµ (Field) | Ð¢Ð¸Ð¿ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
| :--- | :--- | :--- |
| `active` | INT | 1 â€” Ð±Ð¾Ð¹ Ð¸Ð´ÐµÑ‚, 0 â€” Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½ (Ð½ÑƒÐ¶ÐµÐ½ settlement). |
| `winner` | STR | ID ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ñ‚ÐµÐ»Ñ (Ð½Ð°Ð¿Ñ€. "red", "blue"). |
| `rewards` | JSON | Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ñ‹Ð¹ Ð»ÑƒÑ‚ Ð¸ Ð¾Ð¿Ñ‹Ñ‚ (Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð² ÐºÐ¾Ð½Ñ†Ðµ). |
| `teams` | JSON | Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð¿Ð¾ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼ `{ "red": [101], "blue": [202] }`. |
| `actors_info` | JSON | Ð Ð¾Ð»Ð¸ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð² `{ "101": "player", "202": "ai" }`. |
| `dead_actors` | JSON | Ð¡Ð¿Ð¸ÑÐ¾Ðº ID Ð¼ÐµÑ€Ñ‚Ð²Ñ‹Ñ… ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð² `[202]`. |
| `start_time` | INT | Timestamp Ð½Ð°Ñ‡Ð°Ð»Ð° Ð±Ð¾Ñ. |
| `end_time` | INT | Timestamp Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð±Ð¾Ñ. |
| `battle_type` | STR | Ð¢Ð¸Ð¿ Ð±Ð¾Ñ (pve, pvp). |
| `mode` | STR | Ð ÐµÐ¶Ð¸Ð¼ (dungeon, arena, 1v1). |
| `location_id` | STR | ID Ð»Ð¾ÐºÐ°Ñ†Ð¸Ð¸. |

---

## ðŸ“‚ 3. Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð‘Ð¾Ð¹Ñ†Ð° (actor)
**Ð¢Ð¸Ð¿:** `HASH` (ÐœÐ¾Ð½Ð¾Ð»Ð¸Ñ‚Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ñ ÑÐµÐ³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð¿Ð¾Ð»ÑÐ¼Ð¸)
**ÐšÐ»ÑŽÑ‡:** `combat:rbc:{sid}:actor:{char_id}`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ:** Ð›Ð¸Ñ‡Ð½Ð¾Ðµ Ð´ÐµÐ»Ð¾ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ°. Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ 4 Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð±Ð»Ð¾ÐºÐ°.

### ðŸ§® A. Ð‘Ð»Ð¾Ðº Ð’ÐµÑ€ÑÐ¸Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ (Synchronization)
Ð£Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¸Ð½Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸ÐµÐ¹ ÐºÐµÑˆÐ°.
*   `v:req_ver` (INT): Ð¢Ñ€ÐµÐ±ÑƒÐµÐ¼Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ. Ð˜Ð½ÐºÑ€ÐµÐ¼ÐµÐ½Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ÑÑ (+1) Ð¿Ñ€Ð¸ Ð»ÑŽÐ±Ð¾Ð¼ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ Ð² `v:raw`.
*   `v:cache_ver` (INT): Ð’ÐµÑ€ÑÐ¸Ñ ÑÐ»ÐµÐ¿ÐºÐ°. ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ ÐšÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ‚Ð¾Ñ€Ð¾Ð¼ Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€ÐµÑÑ‡ÐµÑ‚Ð°.
*   **Ð›Ð¾Ð³Ð¸ÐºÐ°:** Ð•ÑÐ»Ð¸ `req_ver != cache_ver` â†’ ÐšÐµÑˆ Ð¿Ñ€Ð¾Ñ‚ÑƒÑ…, Ð½ÑƒÐ¶ÐµÐ½ Ð¿ÐµÑ€ÐµÑÑ‡ÐµÑ‚.

### ðŸ“¦ B. Ð‘Ð»Ð¾Ðº ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ¸ (Stats Engine)
ÐžÑ‚Ð²ÐµÑ‡Ð°ÐµÑ‚ Ð·Ð° Ñ€Ð°ÑÑ‡ÐµÑ‚ ÑÐ¸Ð»Ñ‹ ÑƒÐ´Ð°Ñ€Ð¾Ð² Ð¸ Ð·Ð°Ñ‰Ð¸Ñ‚.
*   `v:raw` (JSON): **ÐœÐ°Ñ‚Ñ€Ð¸Ñ†Ð° Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð² (Source of Truth)**.
    *   *Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ:* Ð¡Ð»Ð¾Ð²Ð°Ñ€Ð¸ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð² (base, buffs, items).
    *   *Ð¡Ñ‚Ð°Ñ‚Ñ‹:* ÐŸÑ€Ð¸ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‚ (Ð¡Ð¸Ð»Ð°, Ð›Ð¾Ð²ÐºÐ¾ÑÑ‚ÑŒ), Ñ‚Ð°Ðº ÐºÐ°Ðº ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ°Ð¼Ð¸ Ñ„Ð¾Ñ€Ð¼ÑƒÐ».
    *   *ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ:* Ð¥Ñ€Ð°Ð½Ð¸Ñ‚ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑŽ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ½Ð¾Ð²ÐµÐ½Ð¸Ñ Ñ†Ð¸Ñ„Ñ€. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÑÑ‡ÐµÑ‚Ð°.
    *   ðŸ‘‰ **[ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ ÑÑ…ÐµÐ¼Ð° JSON (v:raw)](redis_actor_schema.md#1-vraw-Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ð°-Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²--source-of-truth)**
*   `v:cache` (JSON): **Ð‘Ð¾ÐµÐ²Ð¾Ð¹ Ð¡Ð»ÐµÐ¿Ð¾Ðº (Calculated View)**.
    *   *Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ:* Ð§Ð¸ÑÑ‚Ñ‹Ð¹ DTO `CharacterModifiersSaveDto`.
    *   *Ð¡Ñ‚Ð°Ñ‚Ñ‹:* ÐžÑ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‚. ÐŸÑ€ÐµÐ²Ñ€Ð°Ñ‰ÐµÐ½Ñ‹ Ð² ÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ (Ð£Ñ€Ð¾Ð½, Ð‘Ñ€Ð¾Ð½Ñ, ÐšÑ€Ð¸Ñ‚).
    *   *ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ:* Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ ÐšÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ‚Ð¾Ñ€Ð¾Ð¼ Ð Ð°Ð·Ð¼ÐµÐ½Ð° Ð´Ð»Ñ Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð½Ð¾Ð³Ð¾ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ.
    *   ðŸ‘‰ **[ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ ÑÑ…ÐµÐ¼Ð° JSON (v:cache)](redis_actor_schema.md#2-vcache-Ð±Ð¾ÐµÐ²Ð¾Ð¹-ÑÐ»ÐµÐ¿Ð¾Ðº--calculated-view)**

### ðŸŽ’ C. Ð‘Ð»Ð¾Ðº ÐÑ€ÑÐµÐ½Ð°Ð»Ð° (Action Engine)
ÐžÑ‚Ð²ÐµÑ‡Ð°ÐµÑ‚ Ð·Ð° Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ñ…Ð¾Ð´Ð°. ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð´Ð»Ñ Ñ‡Ð°ÑÑ‚Ð¾Ð³Ð¾ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ð±ÐµÐ· Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° ÑÑ‚Ð°Ñ‚Ð¾Ð².
*   `s:belt` (JSON): ÐŸÐ¾ÑÑ (Consumables).
    *   *ÐŸÑ€Ð¸Ð¼ÐµÑ€:* `[{ "slot": 1, "id": "potion", "count": 3, "data": {...} }]`
    *   *ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ:* ÐœÐµÐ½ÑÐµÑ‚ÑÑ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾ Ð¿Ñ€Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ð¸ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð¾Ð².
*   `s:skills` (JSON): Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ð½Ð°Ð²Ñ‹ÐºÐ¸.
    *   *ÐŸÑ€Ð¸Ð¼ÐµÑ€:* `["strike", "fireball", "block"]`
*   `s:cd` (JSON): ÐšÑƒÐ»Ð´Ð°ÑƒÐ½Ñ‹ (Timestamps).
    *   *ÐŸÑ€Ð¸Ð¼ÐµÑ€:* `{ "fireball": 1735481234.5 }` (Ð²Ñ€ÐµÐ¼Ñ Ð³Ð¾Ñ‚Ð¾Ð²Ð½Ð¾ÑÑ‚Ð¸).

### â¤ï¸ D. Ð‘Ð»Ð¾Ðº Ð”Ð¸Ð½Ð°Ð¼Ð¸ÐºÐ¸ (Vitals Engine)
ÐžÑ‚Ð²ÐµÑ‡Ð°ÐµÑ‚ Ð·Ð° Ð¶Ð¸Ð·Ð½ÑŒ Ð¸ ÑÐ¼ÐµÑ€Ñ‚ÑŒ. Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‡ÐµÑ€ÐµÐ· Ð°Ñ‚Ð¾Ð¼Ð°Ñ€Ð½Ñ‹Ðµ Ð¸Ð½ÐºÑ€ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ (`HINCRBY`).
*   `s:hp` (INT): Ð¢ÐµÐºÑƒÑ‰ÐµÐµ Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ.
*   `s:en` (INT): Ð¢ÐµÐºÑƒÑ‰Ð°Ñ Ð­Ð½ÐµÑ€Ð³Ð¸Ñ.
*   `s:misc` (JSON): Ð¢Ð¾ÐºÐµÐ½Ñ‹ Ð¸ Ð¡Ñ‚Ð°ÐºÐ¸.
    *   *ÐŸÑ€Ð¸Ð¼ÐµÑ€:* `{ "combo_points": 3, "rage_tokens": 5 }`.

---

## ðŸ“‚ 4. ÐžÑ‡ÐµÑ€ÐµÐ´Ð¸ Ð¦ÐµÐ»ÐµÐ¹ (exchanges)
**Ð¢Ð¸Ð¿:** `LIST`
**ÐšÐ»ÑŽÑ‡:** `combat:rbc:{sid}:exchanges:{char_id}`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ:** "ÐŸÐ¾Ñ‡Ñ‚Ð¾Ð²Ñ‹Ð¹ ÑÑ‰Ð¸Ðº" Ð²Ñ…Ð¾Ð´ÑÑ‰Ð¸Ñ… ÑƒÐ³Ñ€Ð¾Ð·.
**ÐÐ»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼:** FIFO (First In, First Out).
**Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ:** Ð¡Ð¿Ð¸ÑÐ¾Ðº INT (ID Ð²Ñ€Ð°Ð³Ð¾Ð²).
**ÐŸÑ€Ð¸Ð¼ÐµÑ€:** `[201, 105, 201]` â€” Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð±ÑŒÐµÐ¼ 201, Ð¿Ð¾Ñ‚Ð¾Ð¼ 105.

---

## ðŸ“‚ 5. ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¥Ð¾Ð´Ñ‹ (moves)
**Ð¢Ð¸Ð¿:** `HASH`
**ÐšÐ»ÑŽÑ‡:** `combat:rbc:{sid}:moves:{char_id}`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ:** Ð¥Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ ÑÑ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð·Ð°ÑÐ²Ð¾Ðº ("Ð¿ÑƒÐ»ÑŒ"), Ð»ÐµÑ‚ÑÑ‰Ð¸Ñ… Ð² Ñ†ÐµÐ»ÑŒ.
**ÐŸÐ¾Ð»Ðµ (Field):** `{target_id}` (ID Ñ†ÐµÐ»Ð¸).
**Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ:** JSON (`CombatMoveDTO`).
**Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚:** Ð·Ð¾Ð½Ñ‹ Ð°Ñ‚Ð°ÐºÐ¸/Ð±Ð»Ð¾ÐºÐ°, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ ÑÐºÐ¸Ð»Ð», Ñ‚Ð°Ð¹Ð¼ÑÑ‚Ð°Ð¼Ð¿ Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ.

---

## ðŸ“„ 6. Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð‘Ð¾Ñ (logs)
**Ð¢Ð¸Ð¿:** `LIST`
**ÐšÐ»ÑŽÑ‡:** `combat:rbc:{sid}:logs`
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ:** Ð¥Ñ€Ð¾Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ Ð´Ð»Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð½Ð° ÐºÐ»Ð¸ÐµÐ½Ñ‚ (Replay/Chat).
**Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ:** JSON-ÑÑ‚Ñ€Ð¾ÐºÐ¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ (event_type, source, target, value).

---

## ðŸŒ³ Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ (Tree View)

```plaintext
combat:rbc:{uuid}
â”‚
â”œâ”€â”€ meta (HASH)
â”‚   â”œâ”€â”€ active: 1
â”‚   â”œâ”€â”€ winner: null
â”‚   â”œâ”€â”€ teams: "{red:[1], blue:[2]}"
â”‚   â””â”€â”€ dead_actors: "[]"
â”‚
â”œâ”€â”€ logs (LIST)
â”‚   â”œâ”€â”€ "{event: start_battle...}"
â”‚   â””â”€â”€ "{event: damage, from:101, to:202, val:50...}"
â”‚
â”œâ”€â”€ actor (Folder by naming convention)
â”‚   â”‚
â”‚   â”œâ”€â”€ {char_id_101} (HASH) -> PLAYER
â”‚   â”‚   â”œâ”€â”€ v:req_ver: 5           <-- Ð’ÐµÑ€ÑÐ¸Ñ (Ð¡Ð²ÐµÑ‚Ð¾Ñ„Ð¾Ñ€)
â”‚   â”‚   â”œâ”€â”€ v:cache_ver: 5         <-- ÐšÐµÑˆ ÑÐ²ÐµÐ¶Ð¸Ð¹
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ v:raw: "{...attr:str...}"  <-- Ð˜ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸ (Ð¢ÑÐ¶ÐµÐ»Ñ‹Ð¹ JSON)
â”‚   â”‚   â”œâ”€â”€ v:cache: "{...dmg:50...}"  <-- Ð¡Ð»ÐµÐ¿Ð¾Ðº (Ð›ÐµÐ³ÐºÐ¸Ð¹ JSON)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ s:hp: 1500             <-- Ð–Ð¸Ð²Ñ‹Ðµ Vitals (Int)
â”‚   â”‚   â”œâ”€â”€ s:en: 100
â”‚   â”‚   â”œâ”€â”€ s:misc: "{combo:3}"
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ s:belt: "[{id:pot, n:3}]"  <-- Ð˜Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ Ð±Ð¾Ñ
â”‚   â”‚   â”œâ”€â”€ s:skills: "['hit','run']"
â”‚   â”‚   â””â”€â”€ s:cd: "{'run': 1234567}"
â”‚   â”‚
â”‚   â””â”€â”€ {char_id_202} (HASH) -> MONSTER
â”‚       â”œâ”€â”€ v:req_ver: 1
â”‚       â”œâ”€â”€ v:cache_ver: 0         <-- ÐšÐµÑˆ Ð¿Ñ€Ð¾Ñ‚ÑƒÑ… (Ð½ÑƒÐ¶ÐµÐ½ Ð¿ÐµÑ€ÐµÑÑ‡ÐµÑ‚)
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ exchanges (Folder by naming convention)
â”‚   â”œâ”€â”€ {char_id_101} (LIST): [202]      <-- Ð˜Ð³Ñ€Ð¾ÐºÐ° Ð±ÑŒÐµÑ‚ ÐœÐ¾Ð± 202
â”‚   â””â”€â”€ {char_id_202} (LIST): [101, 101] <-- ÐœÐ¾Ð±Ð° Ð±ÑŒÐµÑ‚ Ð˜Ð³Ñ€Ð¾Ðº (2 Ñ€Ð°Ð·Ð°)
â”‚
â””â”€â”€ moves (Folder by naming convention)
    â””â”€â”€ {char_id_101} (HASH)
        â””â”€â”€ {target_202}: "{skill: bash, zones: [1,2]}" <-- Ð›ÐµÑ‚ÑÑ‰Ð¸Ð¹ ÑƒÐ´Ð°Ñ€
```