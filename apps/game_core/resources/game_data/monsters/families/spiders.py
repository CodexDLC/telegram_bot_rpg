"""
СЕМЕЙСТВО: ПАУКИ (Территория, сети, контроль)
=============================================
Логика: сеть -> засада -> подавление
"""

from ..monster_structs import MonsterFamily

SPIDERS_FAMILY: MonsterFamily = {
    "id": "spider_colony",
    "archetype": "beast",
    "organization_type": "swarm",
    "default_tags": ["beast", "spider", "venomous", "web"],
    "hierarchy": {
        "minions": ["spiderling", "skitterer", "cave_spider"],
        "veterans": ["web_stalker", "venom_spider", "ambush_spinner"],
        "elites": ["web_guardian", "brood_keeper", "silk_binder"],
        "boss": ["matriarch", "venom_tyrant", "ancient_weaver"],
    },
    "variants": {
        # --- 1. Мелкие (Minions) ---
        "spiderling": {
            "id": "spiderling",
            "role": "minion",
            "cost": 20,
            "min_tier": 0,
            "max_tier": 2,
            "narrative_hint": "A small, pale spider, barely the size of a cat. Moves in swarms.",
            "extra_tags": ["swarm", "weak"],
            "base_stats": {
                "strength": 3,
                "agility": 12,
                "endurance": 4,
                "intelligence": 1,
                "wisdom": 1,
                "men": 5,
                "perception": 8,
                "charisma": 1,
                "luck": 5,
            },
            "fixed_loadout": {},
            "skills": ["attack_basic", "attack_aoe"],
        },
        "skitterer": {
            "id": "skitterer",
            "role": "minion",
            "cost": 20,
            "min_tier": 0,
            "max_tier": 3,
            "narrative_hint": "A long-legged spider that moves with blinding speed.",
            "extra_tags": ["fast", "agile"],
            "base_stats": {
                "strength": 5,
                "agility": 16,
                "endurance": 6,
                "intelligence": 2,
                "wisdom": 2,
                "men": 5,
                "perception": 10,
                "charisma": 1,
                "luck": 8,
            },
            "fixed_loadout": {},
            "skills": ["attack_fast", "buff_evasion"],
        },
        "cave_spider": {
            "id": "cave_spider",
            "role": "minion",
            "cost": 20,
            "min_tier": 1,
            "max_tier": 5,
            "narrative_hint": "A standard cave spider with thick chitin and sharp mandibles.",
            "extra_tags": ["standard", "cave"],
            "base_stats": {
                "strength": 8,
                "agility": 10,
                "endurance": 10,
                "intelligence": 2,
                "wisdom": 2,
                "men": 5,
                "perception": 8,
                "charisma": 1,
                "luck": 5,
            },
            "fixed_loadout": {},
            "skills": ["attack_basic", "debuff_slow"],
        },
        # --- 2. Охотники (Veterans) ---
        "web_stalker": {
            "id": "web_stalker",
            "role": "veteran",
            "cost": 50,
            "min_tier": 2,
            "max_tier": 6,
            "narrative_hint": "A dark spider that blends into the shadows. Waits for prey to get stuck.",
            "extra_tags": ["trapper", "stealth"],
            "base_stats": {
                "strength": 7,
                "agility": 12,
                "endurance": 9,
                "intelligence": 4,
                "wisdom": 4,
                "men": 8,
                "perception": 12,
                "charisma": 1,
                "luck": 6,
            },
            "fixed_loadout": {},
            "skills": ["special_trap", "attack_heavy"],
        },
        "venom_spider": {
            "id": "venom_spider",
            "role": "veteran",
            "cost": 50,
            "min_tier": 2,
            "max_tier": 6,
            "narrative_hint": "A brightly colored spider dripping with green venom.",
            "extra_tags": ["poison", "ranged"],
            "base_stats": {
                "strength": 6,
                "agility": 11,
                "endurance": 8,
                "intelligence": 3,
                "wisdom": 3,
                "men": 5,
                "perception": 9,
                "charisma": 1,
                "luck": 5,
            },
            "fixed_loadout": {},
            "skills": ["debuff_poison", "debuff_poison"],
        },
        "ambush_spinner": {
            "id": "ambush_spinner",
            "role": "veteran",
            "cost": 50,
            "min_tier": 2,
            "max_tier": 6,
            "narrative_hint": "A spider that buries itself in the ground, waiting to strike.",
            "extra_tags": ["ambush", "surprise"],
            "base_stats": {
                "strength": 9,
                "agility": 14,
                "endurance": 10,
                "intelligence": 5,
                "wisdom": 4,
                "men": 6,
                "perception": 14,
                "charisma": 1,
                "luck": 7,
            },
            "fixed_loadout": {},
            "skills": ["attack_heavy", "attack_heavy"],
        },
        # --- 3. Контролеры территории (Elites) ---
        "web_guardian": {
            "id": "web_guardian",
            "role": "elite",
            "cost": 150,
            "min_tier": 3,
            "max_tier": 7,
            "narrative_hint": "A large, heavily armored spider guarding the entrance to the nest.",
            "extra_tags": ["guardian", "heavy_armor"],
            "base_stats": {
                "strength": 14,
                "agility": 8,
                "endurance": 18,
                "intelligence": 4,
                "wisdom": 5,
                "men": 10,
                "perception": 12,
                "charisma": 2,
                "luck": 5,
            },
            "fixed_loadout": {},
            "skills": ["buff_defense", "debuff_stun", "special_trap"],
        },
        "brood_keeper": {
            "id": "brood_keeper",
            "role": "elite",
            "cost": 150,
            "min_tier": 4,
            "max_tier": 7,
            "narrative_hint": "A bloated spider surrounded by hundreds of tiny spiderlings.",
            "extra_tags": ["summoner", "support"],
            "base_stats": {
                "strength": 10,
                "agility": 6,
                "endurance": 16,
                "intelligence": 6,
                "wisdom": 8,
                "men": 12,
                "perception": 10,
                "charisma": 8,
                "luck": 5,
            },
            "fixed_loadout": {},
            "skills": ["summon_minion", "buff_rage", "attack_lifesteal"],
        },
        "silk_binder": {
            "id": "silk_binder",
            "role": "elite",
            "cost": 150,
            "min_tier": 4,
            "max_tier": 7,
            "narrative_hint": "A spider with elongated limbs, weaving complex magical webs.",
            "extra_tags": ["controller", "magic"],
            "base_stats": {
                "strength": 8,
                "agility": 14,
                "endurance": 12,
                "intelligence": 10,
                "wisdom": 12,
                "men": 15,
                "perception": 14,
                "charisma": 4,
                "luck": 6,
            },
            "fixed_loadout": {},
            "skills": ["debuff_slow", "debuff_stun", "debuff_slow"],
        },
        # --- 4. Альфы (Bosses) ---
        "matriarch": {
            "id": "matriarch",
            "role": "boss",
            "cost": 600,
            "min_tier": 5,
            "max_tier": 7,
            "narrative_hint": "A colossal spider queen, her abdomen pulsing with eggs. The ground shakes when she moves.",
            "extra_tags": ["queen", "leader", "summoner"],
            "base_stats": {
                "strength": 20,
                "agility": 10,
                "endurance": 25,
                "intelligence": 12,
                "wisdom": 14,
                "men": 20,
                "perception": 16,
                "charisma": 10,
                "luck": 10,
            },
            "fixed_loadout": {},
            "skills": ["debuff_weaken", "debuff_slow", "attack_execute", "summon_minion"],
        },
        "venom_tyrant": {
            "id": "venom_tyrant",
            "role": "boss",
            "cost": 600,
            "min_tier": 6,
            "max_tier": 7,
            "narrative_hint": "A giant spider glowing with toxic energy. Its venom melts stone.",
            "extra_tags": ["tyrant", "acid", "poison"],
            "base_stats": {
                "strength": 18,
                "agility": 16,
                "endurance": 20,
                "intelligence": 8,
                "wisdom": 10,
                "men": 15,
                "perception": 14,
                "charisma": 5,
                "luck": 8,
            },
            "fixed_loadout": {},
            "skills": ["debuff_armor_break", "debuff_poison", "debuff_poison", "debuff_armor_break"],
        },
        "ancient_weaver": {
            "id": "ancient_weaver",
            "role": "boss",
            "cost": 600,
            "min_tier": 7,
            "max_tier": 7,
            "narrative_hint": "An impossibly old spider, weaving threads of fate and magic.",
            "extra_tags": ["ancient", "magic", "fate"],
            "base_stats": {
                "strength": 12,
                "agility": 12,
                "endurance": 18,
                "intelligence": 25,
                "wisdom": 25,
                "men": 40,
                "perception": 20,
                "charisma": 15,
                "luck": 20,
            },
            "fixed_loadout": {},
            "skills": ["special_unique", "attack_ranged", "debuff_slow", "special_unique"],
        },
    },
}
