"""
СЕМЕЙСТВО: НЕЖИТЬ (Иерархия подчинения)
=======================================
Логика: воля некроманта -> контроль
"""

from ..monster_structs import MonsterFamily

UNDEAD_FAMILY: MonsterFamily = {
    "id": "undead_legion",
    "archetype": "undead",
    "organization_type": "horde",
    "default_tags": ["undead", "fearless", "dark_magic"],
    "hierarchy": {
        "minions": ["skeleton_servant", "rotting_corpse", "bone_walker"],
        "veterans": ["skeleton_soldier", "grave_guard", "zombie_brute"],
        "elites": ["death_knight", "wight", "bone_champion"],
        "boss": ["lich_acolyte", "necromancer", "lich_lord"],
    },
    "variants": {
        # --- 1. Пешки (Minions) ---
        "skeleton_servant": {
            "id": "skeleton_servant",
            "role": "minion",
            "cost": 20,
            "min_tier": 1,
            "max_tier": 4,
            "narrative_hint": "A fragile skeleton holding a rusty tool or weapon. Moves with jerky motions.",
            "extra_tags": ["skeleton", "weak"],
            "base_stats": {
                "strength": 5,
                "agility": 8,
                "endurance": 5,
                "intelligence": 1,
                "wisdom": 1,
                "men": 10,
                "perception": 8,
                "charisma": 1,
                "luck": 5,
            },
            "fixed_loadout": {"main_hand": "dagger", "chest_garment": "shirt"},
            "skills": ["attack_basic"],
        },
        "rotting_corpse": {
            "id": "rotting_corpse",
            "role": "minion",
            "cost": 20,
            "min_tier": 1,
            "max_tier": 4,
            "narrative_hint": "A shambling corpse, surrounded by flies. Smells of decay.",
            "extra_tags": ["zombie", "disease"],
            "base_stats": {
                "strength": 8,
                "agility": 4,
                "endurance": 12,
                "intelligence": 1,
                "wisdom": 1,
                "men": 10,
                "perception": 6,
                "charisma": 1,
                "luck": 5,
            },
            "fixed_loadout": {"chest_garment": "shirt", "legs_garment": "trousers"},
            "skills": ["attack_basic", "debuff_poison"],
        },
        "bone_walker": {
            "id": "bone_walker",
            "role": "minion",
            "cost": 20,
            "min_tier": 1,
            "max_tier": 4,
            "narrative_hint": "A skeleton reinforced with extra bones. Looks sturdier than a servant.",
            "extra_tags": ["skeleton", "sturdy"],
            "base_stats": {
                "strength": 7,
                "agility": 7,
                "endurance": 8,
                "intelligence": 2,
                "wisdom": 2,
                "men": 10,
                "perception": 8,
                "charisma": 1,
                "luck": 5,
            },
            "fixed_loadout": {"main_hand": "mace", "off_hand": "buckler"},
            "skills": ["attack_heavy"],
        },
        # --- 2. Воины (Veterans) ---
        "skeleton_soldier": {
            "id": "skeleton_soldier",
            "role": "veteran",
            "cost": 50,
            "min_tier": 2,
            "max_tier": 5,
            "narrative_hint": "A skeleton in tattered military gear. Holds a formation.",
            "extra_tags": ["skeleton", "soldier", "shield"],
            "base_stats": {
                "strength": 9,
                "agility": 9,
                "endurance": 9,
                "intelligence": 3,
                "wisdom": 3,
                "men": 10,
                "perception": 9,
                "charisma": 2,
                "luck": 5,
            },
            "fixed_loadout": {
                "main_hand": "sword",
                "off_hand": "shield",
                "chest_armor": "jerkin",
                "head_armor": "helmet",
            },
            "skills": ["attack_basic", "buff_defense"],
        },
        "grave_guard": {
            "id": "grave_guard",
            "role": "veteran",
            "cost": 50,
            "min_tier": 2,
            "max_tier": 5,
            "narrative_hint": "A heavily armored skeleton with a large shield. Stands guard eternally.",
            "extra_tags": ["skeleton", "heavy_armor", "guardian"],
            "base_stats": {
                "strength": 11,
                "agility": 6,
                "endurance": 14,
                "intelligence": 3,
                "wisdom": 4,
                "men": 10,
                "perception": 10,
                "charisma": 2,
                "luck": 5,
            },
            "fixed_loadout": {
                "main_hand": "mace",
                "off_hand": "shield",
                "chest_armor": "plate_chest",
                "head_armor": "helmet",
                "legs_armor": "greaves",
            },
            "skills": ["debuff_stun", "buff_defense"],
        },
        "zombie_brute": {
            "id": "zombie_brute",
            "role": "veteran",
            "cost": 50,
            "min_tier": 2,
            "max_tier": 5,
            "narrative_hint": "A massive, bloated zombie. Its skin is tough as leather.",
            "extra_tags": ["zombie", "brute", "tough"],
            "base_stats": {
                "strength": 16,
                "agility": 3,
                "endurance": 20,
                "intelligence": 1,
                "wisdom": 1,
                "men": 10,
                "perception": 5,
                "charisma": 1,
                "luck": 5,
            },
            "fixed_loadout": {"main_hand": "warhammer"},
            "skills": ["attack_heavy", "explode_on_death"],
        },
        # --- 3. Элита (Elites) ---
        "death_knight": {
            "id": "death_knight",
            "role": "elite",
            "cost": 150,
            "min_tier": 3,
            "max_tier": 6,
            "narrative_hint": "A fallen knight in black plate armor. Eyes glow with cold blue light.",
            "extra_tags": ["knight", "heavy_armor", "cold"],
            "base_stats": {
                "strength": 18,
                "agility": 10,
                "endurance": 18,
                "intelligence": 8,
                "wisdom": 8,
                "men": 12,
                "perception": 12,
                "charisma": 10,
                "luck": 5,
            },
            "fixed_loadout": {
                "main_hand": "greatsword",
                "chest_armor": "plate_chest",
                "head_armor": "helmet",
                "arms_armor": "gauntlets",
                "legs_armor": "greaves",
                "feet_armor": "sabatons",
            },
            "skills": ["debuff_stun", "attack_heavy", "debuff_weaken"],
        },
        "wight": {
            "id": "wight",
            "role": "elite",
            "cost": 150,
            "min_tier": 3,
            "max_tier": 6,
            "narrative_hint": "A desiccated corpse that moves with unnatural speed. Drains life.",
            "extra_tags": ["fast", "lifesteal"],
            "base_stats": {
                "strength": 12,
                "agility": 16,
                "endurance": 12,
                "intelligence": 10,
                "wisdom": 10,
                "men": 12,
                "perception": 14,
                "charisma": 5,
                "luck": 8,
            },
            "fixed_loadout": {"main_hand": "sword", "off_hand": "dagger", "chest_garment": "cloak"},
            "skills": ["attack_lifesteal", "debuff_stun"],
        },
        "bone_champion": {
            "id": "bone_champion",
            "role": "elite",
            "cost": 150,
            "min_tier": 3,
            "max_tier": 6,
            "narrative_hint": "A skeleton warrior of immense skill, wielding dual blades.",
            "extra_tags": ["skeleton", "champion", "dual_wield"],
            "base_stats": {
                "strength": 14,
                "agility": 18,
                "endurance": 14,
                "intelligence": 6,
                "wisdom": 6,
                "men": 10,
                "perception": 15,
                "charisma": 6,
                "luck": 10,
            },
            "fixed_loadout": {"main_hand": "katana", "off_hand": "wakizashi", "chest_armor": "plate_chest"},
            "skills": ["attack_aoe", "attack_aoe"],
        },
        # --- 4. Командиры (Bosses) ---
        "lich_acolyte": {
            "id": "lich_acolyte",
            "role": "boss",
            "cost": 600,
            "min_tier": 4,
            "max_tier": 7,
            "narrative_hint": "A skeletal mage in tattered robes, wielding a staff of dark power.",
            "extra_tags": ["lich", "mage", "summoner"],
            "base_stats": {
                "strength": 6,
                "agility": 8,
                "endurance": 12,
                "intelligence": 18,
                "wisdom": 16,
                "men": 20,
                "perception": 14,
                "charisma": 12,
                "luck": 10,
            },
            "fixed_loadout": {"main_hand": "quarterstaff", "chest_garment": "robe", "head_armor": "hood"},
            "skills": ["attack_ranged", "summon_minion", "buff_defense"],
        },
        "necromancer": {
            "id": "necromancer",
            "role": "boss",
            "cost": 600,
            "min_tier": 4,
            "max_tier": 7,
            "narrative_hint": "A human (or once human) in dark robes, surrounded by an aura of death.",
            "extra_tags": ["human", "necromancer", "summoner"],
            "base_stats": {
                "strength": 8,
                "agility": 10,
                "endurance": 14,
                "intelligence": 20,
                "wisdom": 18,
                "men": 25,
                "perception": 16,
                "charisma": 15,
                "luck": 12,
            },
            "fixed_loadout": {
                "main_hand": "dagger",
                "off_hand": "grimoire",
                "chest_garment": "robe",
                "amulet": "amulet",
            },
            "skills": ["summon_minion", "debuff_weaken", "debuff_stun"],
        },
        "lich_lord": {
            "id": "lich_lord",
            "role": "boss",
            "cost": 600,
            "min_tier": 5,
            "max_tier": 8,
            "narrative_hint": "An ancient lich floating above the ground. Radiates absolute power and cold.",
            "extra_tags": ["lich", "lord", "ancient"],
            "base_stats": {
                "strength": 10,
                "agility": 12,
                "endurance": 20,
                "intelligence": 25,
                "wisdom": 25,
                "men": 40,
                "perception": 20,
                "charisma": 20,
                "luck": 15,
            },
            "fixed_loadout": {
                "main_hand": "quarterstaff",
                "chest_garment": "robe",
                "head_armor": "hood",
                "amulet": "amulet",
                "ring_1": "ring",
                "ring_2": "ring",
            },
            "skills": ["attack_execute", "buff_heal", "attack_aoe", "summon_minion"],
        },
    },
}
